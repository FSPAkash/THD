{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AkashPatil\\\\THD-Dashboard\\\\frontend\\\\src\\\\components\\\\KPIChart.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport { LineChart, Line, AreaChart, Area, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ReferenceLine, Legend } from 'recharts';\nimport { useAuth } from '../context/AuthContext';\nimport './KPIChart.css';\n\n// Preset event tags\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PRESET_TAGS = [{\n  id: 'thanksgiving',\n  name: 'Thanksgiving',\n  color: '#F96302'\n}, {\n  id: 'blackfriday',\n  name: 'Black Friday',\n  color: '#1d1d1f'\n}, {\n  id: 'laborday',\n  name: 'Labor Day',\n  color: '#007AFF'\n}, {\n  id: 'july4th',\n  name: '4th of July',\n  color: '#FF3B30'\n}, {\n  id: 'tier1',\n  name: 'Tier 1 Event',\n  color: '#5856D6'\n}];\n\n// Chart margins matching Recharts config\nconst CHART_MARGINS = {\n  top: 20,\n  right: 20,\n  left: 10,\n  bottom: 20\n};\nconst Y_AXIS_WIDTH = 60;\nconst CHART_HEIGHT = 320;\nfunction KPIChart({\n  data,\n  kpi,\n  chartType,\n  format,\n  launchDate,\n  comparisonData,\n  chartTags,\n  onTagsChange\n}) {\n  _s();\n  const {\n    isBetaMode\n  } = useAuth();\n  const isBeta = isBetaMode();\n  const chartContainerRef = useRef(null);\n  const [showTagPanel, setShowTagPanel] = useState(false);\n  const [customTagName, setCustomTagName] = useState('');\n  const [customTagOwner, setCustomTagOwner] = useState('');\n  const [draggedTag, setDraggedTag] = useState(null);\n  const [showCustomForm, setShowCustomForm] = useState(false);\n  const [dragPreview, setDragPreview] = useState(null);\n  const [containerWidth, setContainerWidth] = useState(0);\n\n  // Use comparison data if available, otherwise fall back to regular data\n  const chartData = comparisonData && comparisonData.length > 0 ? comparisonData : data;\n  const hasComparison = comparisonData && comparisonData.length > 0;\n\n  // Track container width for tag positioning\n  useEffect(() => {\n    const updateWidth = () => {\n      if (chartContainerRef.current) {\n        setContainerWidth(chartContainerRef.current.offsetWidth);\n      }\n    };\n    updateWidth();\n    window.addEventListener('resize', updateWidth);\n\n    // Also observe size changes\n    const resizeObserver = new ResizeObserver(updateWidth);\n    if (chartContainerRef.current) {\n      resizeObserver.observe(chartContainerRef.current);\n    }\n    return () => {\n      window.removeEventListener('resize', updateWidth);\n      resizeObserver.disconnect();\n    };\n  }, []);\n  const formatValue = val => {\n    if (val === null || val === undefined || isNaN(val)) return '-';\n    if (format === 'currency') {\n      if (Math.abs(val) >= 1000000) {\n        return `$${(val / 1000000).toFixed(1)}M`;\n      }\n      if (Math.abs(val) >= 1000) {\n        return `$${(val / 1000).toFixed(0)}K`;\n      }\n      return `$${val.toFixed(2)}`;\n    }\n    if (format === 'percentage') {\n      return `${(val * 100).toFixed(2)}%`;\n    }\n    if (Math.abs(val) >= 1000000) {\n      return `${(val / 1000000).toFixed(1)}M`;\n    }\n    if (Math.abs(val) >= 1000) {\n      return `${(val / 1000).toFixed(0)}K`;\n    }\n    return val.toLocaleString();\n  };\n  const formatAxisDate = dateStr => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n  const formatFullDate = dateStr => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  // Get container rect - always fresh to handle dynamic sizing\n  const getContainerRect = useCallback(() => {\n    if (!chartContainerRef.current) return null;\n    return chartContainerRef.current.getBoundingClientRect();\n  }, []);\n\n  // Calculate date index from clientX position\n  const getDateIndexFromX = useCallback(clientX => {\n    if (!chartData || chartData.length === 0) return -1;\n    const rect = getContainerRect();\n    if (!rect) return -1;\n    const chartAreaLeft = Y_AXIS_WIDTH + CHART_MARGINS.left;\n    const chartAreaWidth = rect.width - chartAreaLeft - CHART_MARGINS.right;\n    const relativeX = clientX - rect.left - chartAreaLeft;\n    const percentage = Math.max(0, Math.min(1, relativeX / chartAreaWidth));\n    const dataIndex = Math.round(percentage * (chartData.length - 1));\n    return Math.max(0, Math.min(dataIndex, chartData.length - 1));\n  }, [chartData, getContainerRect]);\n\n  // Get x position (relative to container) for a data index\n  const getXPositionForIndex = useCallback(index => {\n    var _chartContainerRef$cu;\n    if (!chartData || chartData.length === 0 || index < 0) return 0;\n\n    // Use containerWidth state for reliable positioning\n    const width = containerWidth || ((_chartContainerRef$cu = chartContainerRef.current) === null || _chartContainerRef$cu === void 0 ? void 0 : _chartContainerRef$cu.offsetWidth) || 0;\n    if (width === 0) return 0;\n    const chartAreaLeft = Y_AXIS_WIDTH + CHART_MARGINS.left;\n    const chartAreaWidth = width - chartAreaLeft - CHART_MARGINS.right;\n\n    // Handle single data point\n    if (chartData.length === 1) {\n      return chartAreaLeft + chartAreaWidth / 2;\n    }\n    const percentage = index / (chartData.length - 1);\n    return chartAreaLeft + percentage * chartAreaWidth;\n  }, [chartData, containerWidth]);\n  const CustomTooltip = ({\n    active,\n    payload,\n    label\n  }) => {\n    if (active && payload && payload.length) {\n      const dateStr = new Date(label).toLocaleDateString('en-US', {\n        weekday: 'short',\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n\n      // Check if there's a tag for this date\n      const dateTag = chartTags === null || chartTags === void 0 ? void 0 : chartTags.find(t => t.date === label);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-tooltip\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"tooltip-date\",\n          children: dateStr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), dateTag && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"tooltip-tag\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tooltip-tag-marker\",\n            style: {\n              background: dateTag.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), dateTag.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), payload.map((entry, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"tooltip-value\",\n          style: {\n            color: entry.color\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tooltip-label\",\n            children: [entry.name, \": \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this), formatValue(entry.value)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this);\n    }\n    return null;\n  };\n  const handleDragStart = (e, tag) => {\n    setDraggedTag(tag);\n    e.dataTransfer.effectAllowed = 'copy';\n    // Set a transparent drag image\n    const img = new Image();\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    e.dataTransfer.setDragImage(img, 0, 0);\n  };\n  const handleDragOver = e => {\n    var _chartData$dateIndex;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n    if (!draggedTag || !chartData || chartData.length === 0) return;\n    const rect = getContainerRect();\n    if (!rect) return;\n    const dateIndex = getDateIndexFromX(e.clientX);\n    const targetDate = (_chartData$dateIndex = chartData[dateIndex]) === null || _chartData$dateIndex === void 0 ? void 0 : _chartData$dateIndex.date;\n\n    // Calculate position relative to container for display\n    const xPosition = getXPositionForIndex(dateIndex);\n    if (targetDate && dateIndex >= 0) {\n      setDragPreview({\n        date: targetDate,\n        formattedDate: formatFullDate(targetDate),\n        x: xPosition,\n        index: dateIndex,\n        tag: draggedTag\n      });\n    }\n  };\n  const handleDragLeave = e => {\n    var _chartContainerRef$cu2;\n    // Only clear preview if we're actually leaving the chart area\n    const rect = (_chartContainerRef$cu2 = chartContainerRef.current) === null || _chartContainerRef$cu2 === void 0 ? void 0 : _chartContainerRef$cu2.getBoundingClientRect();\n    if (rect) {\n      const {\n        clientX,\n        clientY\n      } = e;\n      if (clientX < rect.left || clientX > rect.right || clientY < rect.top || clientY > rect.bottom) {\n        setDragPreview(null);\n      }\n    }\n  };\n  const handleDrop = e => {\n    var _chartData$dateIndex2;\n    e.preventDefault();\n    if (!draggedTag || !chartData || chartData.length === 0) return;\n    const dateIndex = getDateIndexFromX(e.clientX);\n    const targetDate = (_chartData$dateIndex2 = chartData[dateIndex]) === null || _chartData$dateIndex2 === void 0 ? void 0 : _chartData$dateIndex2.date;\n    if (targetDate) {\n      const newTag = {\n        ...draggedTag,\n        id: `${draggedTag.id}-${Date.now()}`,\n        date: targetDate,\n        dateIndex: dateIndex\n      };\n      if (onTagsChange) {\n        onTagsChange([...(chartTags || []), newTag]);\n      }\n    }\n    setDraggedTag(null);\n    setDragPreview(null);\n  };\n  const handleDragEnd = () => {\n    setDragPreview(null);\n  };\n  const handleAddCustomTag = () => {\n    if (!customTagName.trim() || !customTagOwner.trim()) return;\n    const newTag = {\n      id: `custom-${Date.now()}`,\n      name: customTagName.trim(),\n      owner: customTagOwner.trim(),\n      color: '#6e6e73',\n      isCustom: true\n    };\n    setDraggedTag(newTag);\n    setCustomTagName('');\n    setCustomTagOwner('');\n    setShowCustomForm(false);\n  };\n  const handleRemoveTag = tagId => {\n    if (onTagsChange) {\n      onTagsChange((chartTags || []).filter(t => t.id !== tagId));\n    }\n  };\n  const commonProps = {\n    data: chartData,\n    margin: CHART_MARGINS\n  };\n  const axisStyle = {\n    fontSize: 11,\n    fill: '#86868b',\n    fontWeight: 500\n  };\n\n  // Get the correct data keys based on comparison mode\n  const tyDataKey = hasComparison ? `${kpi}_ty` : kpi;\n  const lyDataKey = hasComparison ? `${kpi}_ly` : null;\n\n  // Render placed tags as overlay elements\n  const renderPlacedTags = () => {\n    if (!chartTags || chartTags.length === 0 || !chartData || chartData.length === 0) return null;\n    if (containerWidth === 0) return null;\n    const lineHeight = CHART_HEIGHT - CHART_MARGINS.top - CHART_MARGINS.bottom - 50;\n    return chartTags.map(tag => {\n      // Find the date index - use stored index first, then lookup by date\n      let dateIndex = tag.dateIndex;\n      if (dateIndex === undefined || dateIndex < 0 || dateIndex >= chartData.length) {\n        dateIndex = chartData.findIndex(d => d.date === tag.date);\n      }\n      if (dateIndex === -1 || dateIndex >= chartData.length) return null;\n      const xPos = getXPositionForIndex(dateIndex);\n      if (xPos === 0 && dateIndex !== 0) return null; // Position calculation failed\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"placed-tag-container\",\n        style: {\n          left: `${xPos}px`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flag-marker\",\n          style: {\n            '--flag-color': tag.color\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flag-pole-cap\",\n            style: {\n              background: tag.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flag-banner\",\n            style: {\n              background: tag.color\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flag-name\",\n              children: tag.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), tag.owner && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flag-owner\",\n              children: [\"by \", tag.owner]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"flag-remove\",\n              onClick: () => handleRemoveTag(tag.id),\n              title: \"Remove tag\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"10\",\n                height: \"10\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"18\",\n                  y1: \"6\",\n                  x2: \"6\",\n                  y2: \"18\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"6\",\n                  y1: \"6\",\n                  x2: \"18\",\n                  y2: \"18\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flag-pole\",\n            style: {\n              background: tag.color,\n              height: lineHeight\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flag-date-label\",\n          style: {\n            color: tag.color\n          },\n          children: formatAxisDate(tag.date)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, tag.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  // Render drag preview\n  const renderDragPreview = () => {\n    if (!dragPreview || dragPreview.x === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drag-preview-container\",\n      style: {\n        left: `${dragPreview.x}px`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preview-tag\",\n        style: {\n          '--tag-color': dragPreview.tag.color,\n          borderColor: dragPreview.tag.color\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"preview-tag-marker\",\n          style: {\n            background: dragPreview.tag.color\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"preview-tag-name\",\n          children: dragPreview.tag.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preview-line\",\n        style: {\n          borderColor: dragPreview.tag.color\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preview-date\",\n        style: {\n          borderColor: dragPreview.tag.color\n        },\n        children: dragPreview.formattedDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this);\n  };\n  const renderChart = () => {\n    switch (chartType) {\n      case 'area':\n        return /*#__PURE__*/_jsxDEV(AreaChart, {\n          ...commonProps,\n          children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n            children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n              id: \"areaGradientTY\",\n              x1: \"0\",\n              y1: \"0\",\n              x2: \"0\",\n              y2: \"1\",\n              children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                offset: \"0%\",\n                stopColor: \"#F96302\",\n                stopOpacity: 0.25\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                offset: \"100%\",\n                stopColor: \"#F96302\",\n                stopOpacity: 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n              id: \"areaGradientLY\",\n              x1: \"0\",\n              y1: \"0\",\n              x2: \"0\",\n              y2: \"1\",\n              children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                offset: \"0%\",\n                stopColor: \"#86868b\",\n                stopOpacity: 0.15\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                offset: \"100%\",\n                stopColor: \"#86868b\",\n                stopOpacity: 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(0,0,0,0.04)\",\n            vertical: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"date\",\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: {\n              stroke: 'rgba(0,0,0,0.08)'\n            },\n            tickFormatter: formatAxisDate,\n            interval: \"preserveStartEnd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: false,\n            tickFormatter: formatValue,\n            width: Y_AXIS_WIDTH\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), hasComparison && /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 31\n          }, this), launchDate && /*#__PURE__*/_jsxDEV(ReferenceLine, {\n            x: launchDate,\n            stroke: \"#F96302\",\n            strokeDasharray: \"4 4\",\n            strokeWidth: 2,\n            label: {\n              value: 'Launch',\n              position: 'top',\n              fill: '#F96302',\n              fontSize: 11,\n              fontWeight: 600\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this), hasComparison && lyDataKey && /*#__PURE__*/_jsxDEV(Area, {\n            type: \"monotone\",\n            dataKey: lyDataKey,\n            name: \"Last Year\",\n            stroke: \"#86868b\",\n            strokeWidth: 1.5,\n            strokeDasharray: \"4 4\",\n            fill: \"url(#areaGradientLY)\",\n            dot: false,\n            activeDot: {\n              r: 4,\n              fill: '#86868b',\n              stroke: '#fff',\n              strokeWidth: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Area, {\n            type: \"monotone\",\n            dataKey: tyDataKey,\n            name: hasComparison ? \"This Year\" : kpi,\n            stroke: \"#F96302\",\n            strokeWidth: 2,\n            fill: \"url(#areaGradientTY)\",\n            dot: false,\n            activeDot: {\n              r: 5,\n              fill: '#F96302',\n              stroke: '#fff',\n              strokeWidth: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this);\n      case 'bar':\n        return /*#__PURE__*/_jsxDEV(BarChart, {\n          ...commonProps,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(0,0,0,0.04)\",\n            vertical: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"date\",\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: {\n              stroke: 'rgba(0,0,0,0.08)'\n            },\n            tickFormatter: formatAxisDate,\n            interval: \"preserveStartEnd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: false,\n            tickFormatter: formatValue,\n            width: Y_AXIS_WIDTH\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), hasComparison && /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 31\n          }, this), launchDate && /*#__PURE__*/_jsxDEV(ReferenceLine, {\n            x: launchDate,\n            stroke: \"#F96302\",\n            strokeDasharray: \"4 4\",\n            strokeWidth: 2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), hasComparison && lyDataKey && /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: lyDataKey,\n            name: \"Last Year\",\n            fill: \"#d1d1d6\",\n            radius: [4, 4, 0, 0],\n            maxBarSize: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: tyDataKey,\n            name: hasComparison ? \"This Year\" : kpi,\n            fill: \"#F96302\",\n            radius: [4, 4, 0, 0],\n            maxBarSize: hasComparison ? 20 : 40\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(LineChart, {\n          ...commonProps,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            stroke: \"rgba(0,0,0,0.04)\",\n            vertical: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"date\",\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: {\n              stroke: 'rgba(0,0,0,0.08)'\n            },\n            tickFormatter: formatAxisDate,\n            interval: \"preserveStartEnd\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            tick: axisStyle,\n            tickLine: false,\n            axisLine: false,\n            tickFormatter: formatValue,\n            width: Y_AXIS_WIDTH\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this), hasComparison && /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 31\n          }, this), launchDate && /*#__PURE__*/_jsxDEV(ReferenceLine, {\n            x: launchDate,\n            stroke: \"#F96302\",\n            strokeDasharray: \"4 4\",\n            strokeWidth: 2,\n            label: {\n              value: 'Launch',\n              position: 'top',\n              fill: '#F96302',\n              fontSize: 11,\n              fontWeight: 600\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this), hasComparison && lyDataKey && /*#__PURE__*/_jsxDEV(Line, {\n            type: \"monotone\",\n            dataKey: lyDataKey,\n            name: \"Last Year\",\n            stroke: \"#86868b\",\n            strokeWidth: 1.5,\n            strokeDasharray: \"4 4\",\n            dot: false,\n            activeDot: {\n              r: 4,\n              fill: '#86868b',\n              stroke: '#fff',\n              strokeWidth: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Line, {\n            type: \"monotone\",\n            dataKey: tyDataKey,\n            name: hasComparison ? \"This Year\" : kpi,\n            stroke: \"#F96302\",\n            strokeWidth: 2,\n            dot: false,\n            activeDot: {\n              r: 5,\n              fill: '#F96302',\n              stroke: '#fff',\n              strokeWidth: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this);\n    }\n  };\n  if (!chartData || chartData.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-empty\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No data available for the selected period\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }, this);\n  }\n  if (isBeta) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"kpi-chart beta-restricted\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-blur-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 320,\n          children: renderChart()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"beta-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"beta-overlay-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Place holder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Chart visualization\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"kpi-chart-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `kpi-chart ${draggedTag ? 'drop-active' : ''}`,\n      ref: chartContainerRef,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDrop: handleDrop,\n      children: [/*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n        width: \"100%\",\n        height: 320,\n        children: renderChart()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tags-overlay\",\n        children: renderPlacedTags()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this), dragPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drag-preview-overlay\",\n        children: renderDragPreview()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-tag-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tag-panel-toggle ${showTagPanel ? 'active' : ''}`,\n        onClick: () => setShowTagPanel(!showTagPanel),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"7\",\n            y1: \"7\",\n            x2: \"7.01\",\n            y2: \"7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Add Info Tag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this), chartTags && chartTags.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"active-tags\",\n        children: chartTags.map(tag => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"active-tag\",\n          style: {\n            borderColor: tag.color,\n            color: tag.color\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tag-marker\",\n            style: {\n              background: tag.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 17\n          }, this), tag.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tag-date\",\n            children: formatAxisDate(tag.date)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRemoveTag(tag.id),\n            className: \"tag-remove\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"12\",\n              height: \"12\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"18\",\n                y1: \"6\",\n                x2: \"6\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"6\",\n                y1: \"6\",\n                x2: \"18\",\n                y2: \"18\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 17\n          }, this)]\n        }, tag.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 7\n    }, this), showTagPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tag-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag-panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Drag tags onto the chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"tag-panel-close\",\n          onClick: () => setShowTagPanel(false),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"18\",\n              y1: \"6\",\n              x2: \"6\",\n              y2: \"18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"6\",\n              y1: \"6\",\n              x2: \"18\",\n              y2: \"18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preset-tags\",\n        children: PRESET_TAGS.map(tag => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"draggable-tag\",\n          draggable: true,\n          onDragStart: e => handleDragStart(e, tag),\n          onDragEnd: handleDragEnd,\n          style: {\n            borderColor: tag.color\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tag-marker\",\n            style: {\n              background: tag.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 17\n          }, this), tag.name]\n        }, tag.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom-tag-section\",\n        children: !showCustomForm ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-custom-tag-btn\",\n          onClick: () => setShowCustomForm(true),\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"14\",\n            height: \"14\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"12\",\n              y1: \"5\",\n              x2: \"12\",\n              y2: \"19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"5\",\n              y1: \"12\",\n              x2: \"19\",\n              y2: \"12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 17\n          }, this), \"Create Custom Tag\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"custom-tag-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Tag name\",\n            value: customTagName,\n            onChange: e => setCustomTagName(e.target.value),\n            className: \"custom-tag-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Your name (owner)\",\n            value: customTagOwner,\n            onChange: e => setCustomTagOwner(e.target.value),\n            className: \"custom-tag-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom-tag-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"custom-tag-cancel\",\n              onClick: () => {\n                setShowCustomForm(false);\n                setCustomTagName('');\n                setCustomTagOwner('');\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"custom-tag-create\",\n              onClick: handleAddCustomTag,\n              disabled: !customTagName.trim() || !customTagOwner.trim(),\n              children: \"Create & Drag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 11\n      }, this), draggedTag && draggedTag.isCustom && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drag-instruction\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Now drag your custom tag \\\"\", draggedTag.name, \"\\\" onto the chart\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"draggable-tag custom\",\n          draggable: true,\n          onDragStart: e => handleDragStart(e, draggedTag),\n          onDragEnd: handleDragEnd,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tag-marker\",\n            style: {\n              background: draggedTag.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 17\n          }, this), draggedTag.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tag-owner\",\n            children: [\"by \", draggedTag.owner]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 596,\n    columnNumber: 5\n  }, this);\n}\n_s(KPIChart, \"WP6QhlECRKwjtmHh99LB5wIf5mk=\", false, function () {\n  return [useAuth];\n});\n_c = KPIChart;\nexport default KPIChart;\nvar _c;\n$RefreshReg$(_c, \"KPIChart\");","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","LineChart","Line","AreaChart","Area","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","ReferenceLine","Legend","useAuth","jsxDEV","_jsxDEV","PRESET_TAGS","id","name","color","CHART_MARGINS","top","right","left","bottom","Y_AXIS_WIDTH","CHART_HEIGHT","KPIChart","data","kpi","chartType","format","launchDate","comparisonData","chartTags","onTagsChange","_s","isBetaMode","isBeta","chartContainerRef","showTagPanel","setShowTagPanel","customTagName","setCustomTagName","customTagOwner","setCustomTagOwner","draggedTag","setDraggedTag","showCustomForm","setShowCustomForm","dragPreview","setDragPreview","containerWidth","setContainerWidth","chartData","length","hasComparison","updateWidth","current","offsetWidth","window","addEventListener","resizeObserver","ResizeObserver","observe","removeEventListener","disconnect","formatValue","val","undefined","isNaN","Math","abs","toFixed","toLocaleString","formatAxisDate","dateStr","date","Date","toLocaleDateString","month","day","formatFullDate","weekday","year","getContainerRect","getBoundingClientRect","getDateIndexFromX","clientX","rect","chartAreaLeft","chartAreaWidth","width","relativeX","percentage","max","min","dataIndex","round","getXPositionForIndex","index","_chartContainerRef$cu","CustomTooltip","active","payload","label","dateTag","find","t","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","background","map","entry","value","handleDragStart","e","tag","dataTransfer","effectAllowed","img","Image","src","setDragImage","handleDragOver","_chartData$dateIndex","preventDefault","dropEffect","dateIndex","targetDate","xPosition","formattedDate","x","handleDragLeave","_chartContainerRef$cu2","clientY","handleDrop","_chartData$dateIndex2","newTag","now","handleDragEnd","handleAddCustomTag","trim","owner","isCustom","handleRemoveTag","tagId","filter","commonProps","margin","axisStyle","fontSize","fill","fontWeight","tyDataKey","lyDataKey","renderPlacedTags","lineHeight","findIndex","d","xPos","onClick","title","height","viewBox","stroke","strokeWidth","x1","y1","x2","y2","renderDragPreview","borderColor","renderChart","offset","stopColor","stopOpacity","strokeDasharray","vertical","dataKey","tick","tickLine","axisLine","tickFormatter","interval","content","position","type","dot","activeDot","r","radius","maxBarSize","ref","onDragOver","onDragLeave","onDrop","strokeLinecap","strokeLinejoin","draggable","onDragStart","onDragEnd","placeholder","onChange","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/AkashPatil/THD-Dashboard/frontend/src/components/KPIChart.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react';\r\nimport {\r\n  LineChart, Line, AreaChart, Area, BarChart, Bar,\r\n  XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\r\n  ReferenceLine, Legend\r\n} from 'recharts';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './KPIChart.css';\r\n\r\n// Preset event tags\r\nconst PRESET_TAGS = [\r\n  { id: 'thanksgiving', name: 'Thanksgiving', color: '#F96302' },\r\n  { id: 'blackfriday', name: 'Black Friday', color: '#1d1d1f' },\r\n  { id: 'laborday', name: 'Labor Day', color: '#007AFF' },\r\n  { id: 'july4th', name: '4th of July', color: '#FF3B30' },\r\n  { id: 'tier1', name: 'Tier 1 Event', color: '#5856D6' }\r\n];\r\n\r\n// Chart margins matching Recharts config\r\nconst CHART_MARGINS = { top: 20, right: 20, left: 10, bottom: 20 };\r\nconst Y_AXIS_WIDTH = 60;\r\nconst CHART_HEIGHT = 320;\r\n\r\nfunction KPIChart({ data, kpi, chartType, format, launchDate, comparisonData, chartTags, onTagsChange }) {\r\n  const { isBetaMode } = useAuth();\r\n  const isBeta = isBetaMode();\r\n  const chartContainerRef = useRef(null);\r\n  const [showTagPanel, setShowTagPanel] = useState(false);\r\n  const [customTagName, setCustomTagName] = useState('');\r\n  const [customTagOwner, setCustomTagOwner] = useState('');\r\n  const [draggedTag, setDraggedTag] = useState(null);\r\n  const [showCustomForm, setShowCustomForm] = useState(false);\r\n  const [dragPreview, setDragPreview] = useState(null);\r\n  const [containerWidth, setContainerWidth] = useState(0);\r\n\r\n  // Use comparison data if available, otherwise fall back to regular data\r\n  const chartData = comparisonData && comparisonData.length > 0 ? comparisonData : data;\r\n  const hasComparison = comparisonData && comparisonData.length > 0;\r\n\r\n  // Track container width for tag positioning\r\n  useEffect(() => {\r\n    const updateWidth = () => {\r\n      if (chartContainerRef.current) {\r\n        setContainerWidth(chartContainerRef.current.offsetWidth);\r\n      }\r\n    };\r\n\r\n    updateWidth();\r\n    window.addEventListener('resize', updateWidth);\r\n\r\n    // Also observe size changes\r\n    const resizeObserver = new ResizeObserver(updateWidth);\r\n    if (chartContainerRef.current) {\r\n      resizeObserver.observe(chartContainerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', updateWidth);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const formatValue = (val) => {\r\n    if (val === null || val === undefined || isNaN(val)) return '-';\r\n\r\n    if (format === 'currency') {\r\n      if (Math.abs(val) >= 1000000) {\r\n        return `$${(val / 1000000).toFixed(1)}M`;\r\n      }\r\n      if (Math.abs(val) >= 1000) {\r\n        return `$${(val / 1000).toFixed(0)}K`;\r\n      }\r\n      return `$${val.toFixed(2)}`;\r\n    }\r\n    if (format === 'percentage') {\r\n      return `${(val * 100).toFixed(2)}%`;\r\n    }\r\n    if (Math.abs(val) >= 1000000) {\r\n      return `${(val / 1000000).toFixed(1)}M`;\r\n    }\r\n    if (Math.abs(val) >= 1000) {\r\n      return `${(val / 1000).toFixed(0)}K`;\r\n    }\r\n    return val.toLocaleString();\r\n  };\r\n\r\n  const formatAxisDate = (dateStr) => {\r\n    const date = new Date(dateStr);\r\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n  };\r\n\r\n  const formatFullDate = (dateStr) => {\r\n    const date = new Date(dateStr);\r\n    return date.toLocaleDateString('en-US', {\r\n      weekday: 'short',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  // Get container rect - always fresh to handle dynamic sizing\r\n  const getContainerRect = useCallback(() => {\r\n    if (!chartContainerRef.current) return null;\r\n    return chartContainerRef.current.getBoundingClientRect();\r\n  }, []);\r\n\r\n  // Calculate date index from clientX position\r\n  const getDateIndexFromX = useCallback((clientX) => {\r\n    if (!chartData || chartData.length === 0) return -1;\r\n    const rect = getContainerRect();\r\n    if (!rect) return -1;\r\n\r\n    const chartAreaLeft = Y_AXIS_WIDTH + CHART_MARGINS.left;\r\n    const chartAreaWidth = rect.width - chartAreaLeft - CHART_MARGINS.right;\r\n\r\n    const relativeX = clientX - rect.left - chartAreaLeft;\r\n    const percentage = Math.max(0, Math.min(1, relativeX / chartAreaWidth));\r\n\r\n    const dataIndex = Math.round(percentage * (chartData.length - 1));\r\n    return Math.max(0, Math.min(dataIndex, chartData.length - 1));\r\n  }, [chartData, getContainerRect]);\r\n\r\n  // Get x position (relative to container) for a data index\r\n  const getXPositionForIndex = useCallback((index) => {\r\n    if (!chartData || chartData.length === 0 || index < 0) return 0;\r\n\r\n    // Use containerWidth state for reliable positioning\r\n    const width = containerWidth || (chartContainerRef.current?.offsetWidth || 0);\r\n    if (width === 0) return 0;\r\n\r\n    const chartAreaLeft = Y_AXIS_WIDTH + CHART_MARGINS.left;\r\n    const chartAreaWidth = width - chartAreaLeft - CHART_MARGINS.right;\r\n\r\n    // Handle single data point\r\n    if (chartData.length === 1) {\r\n      return chartAreaLeft + chartAreaWidth / 2;\r\n    }\r\n\r\n    const percentage = index / (chartData.length - 1);\r\n    return chartAreaLeft + (percentage * chartAreaWidth);\r\n  }, [chartData, containerWidth]);\r\n\r\n  const CustomTooltip = ({ active, payload, label }) => {\r\n    if (active && payload && payload.length) {\r\n      const dateStr = new Date(label).toLocaleDateString('en-US', {\r\n        weekday: 'short',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: 'numeric'\r\n      });\r\n\r\n      // Check if there's a tag for this date\r\n      const dateTag = chartTags?.find(t => t.date === label);\r\n\r\n      return (\r\n        <div className=\"chart-tooltip\">\r\n          <p className=\"tooltip-date\">{dateStr}</p>\r\n          {dateTag && (\r\n            <p className=\"tooltip-tag\">\r\n              <span className=\"tooltip-tag-marker\" style={{ background: dateTag.color }}></span>\r\n              {dateTag.name}\r\n            </p>\r\n          )}\r\n          {payload.map((entry, index) => (\r\n            <p key={index} className=\"tooltip-value\" style={{ color: entry.color }}>\r\n              <span className=\"tooltip-label\">{entry.name}: </span>\r\n              {formatValue(entry.value)}\r\n            </p>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleDragStart = (e, tag) => {\r\n    setDraggedTag(tag);\r\n    e.dataTransfer.effectAllowed = 'copy';\r\n    // Set a transparent drag image\r\n    const img = new Image();\r\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n    e.dataTransfer.setDragImage(img, 0, 0);\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'copy';\r\n\r\n    if (!draggedTag || !chartData || chartData.length === 0) return;\r\n\r\n    const rect = getContainerRect();\r\n    if (!rect) return;\r\n\r\n    const dateIndex = getDateIndexFromX(e.clientX);\r\n    const targetDate = chartData[dateIndex]?.date;\r\n\r\n    // Calculate position relative to container for display\r\n    const xPosition = getXPositionForIndex(dateIndex);\r\n\r\n    if (targetDate && dateIndex >= 0) {\r\n      setDragPreview({\r\n        date: targetDate,\r\n        formattedDate: formatFullDate(targetDate),\r\n        x: xPosition,\r\n        index: dateIndex,\r\n        tag: draggedTag\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    // Only clear preview if we're actually leaving the chart area\r\n    const rect = chartContainerRef.current?.getBoundingClientRect();\r\n    if (rect) {\r\n      const { clientX, clientY } = e;\r\n      if (clientX < rect.left || clientX > rect.right ||\r\n          clientY < rect.top || clientY > rect.bottom) {\r\n        setDragPreview(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    if (!draggedTag || !chartData || chartData.length === 0) return;\r\n\r\n    const dateIndex = getDateIndexFromX(e.clientX);\r\n    const targetDate = chartData[dateIndex]?.date;\r\n\r\n    if (targetDate) {\r\n      const newTag = {\r\n        ...draggedTag,\r\n        id: `${draggedTag.id}-${Date.now()}`,\r\n        date: targetDate,\r\n        dateIndex: dateIndex\r\n      };\r\n\r\n      if (onTagsChange) {\r\n        onTagsChange([...(chartTags || []), newTag]);\r\n      }\r\n    }\r\n\r\n    setDraggedTag(null);\r\n    setDragPreview(null);\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDragPreview(null);\r\n  };\r\n\r\n  const handleAddCustomTag = () => {\r\n    if (!customTagName.trim() || !customTagOwner.trim()) return;\r\n\r\n    const newTag = {\r\n      id: `custom-${Date.now()}`,\r\n      name: customTagName.trim(),\r\n      owner: customTagOwner.trim(),\r\n      color: '#6e6e73',\r\n      isCustom: true\r\n    };\r\n\r\n    setDraggedTag(newTag);\r\n    setCustomTagName('');\r\n    setCustomTagOwner('');\r\n    setShowCustomForm(false);\r\n  };\r\n\r\n  const handleRemoveTag = (tagId) => {\r\n    if (onTagsChange) {\r\n      onTagsChange((chartTags || []).filter(t => t.id !== tagId));\r\n    }\r\n  };\r\n\r\n  const commonProps = {\r\n    data: chartData,\r\n    margin: CHART_MARGINS\r\n  };\r\n\r\n  const axisStyle = {\r\n    fontSize: 11,\r\n    fill: '#86868b',\r\n    fontWeight: 500\r\n  };\r\n\r\n  // Get the correct data keys based on comparison mode\r\n  const tyDataKey = hasComparison ? `${kpi}_ty` : kpi;\r\n  const lyDataKey = hasComparison ? `${kpi}_ly` : null;\r\n\r\n  // Render placed tags as overlay elements\r\n  const renderPlacedTags = () => {\r\n    if (!chartTags || chartTags.length === 0 || !chartData || chartData.length === 0) return null;\r\n    if (containerWidth === 0) return null;\r\n\r\n    const lineHeight = CHART_HEIGHT - CHART_MARGINS.top - CHART_MARGINS.bottom - 50;\r\n\r\n    return chartTags.map((tag) => {\r\n      // Find the date index - use stored index first, then lookup by date\r\n      let dateIndex = tag.dateIndex;\r\n      if (dateIndex === undefined || dateIndex < 0 || dateIndex >= chartData.length) {\r\n        dateIndex = chartData.findIndex(d => d.date === tag.date);\r\n      }\r\n\r\n      if (dateIndex === -1 || dateIndex >= chartData.length) return null;\r\n\r\n      const xPos = getXPositionForIndex(dateIndex);\r\n      if (xPos === 0 && dateIndex !== 0) return null; // Position calculation failed\r\n\r\n      return (\r\n        <div\r\n          key={tag.id}\r\n          className=\"placed-tag-container\"\r\n          style={{ left: `${xPos}px` }}\r\n        >\r\n          {/* Flag marker */}\r\n          <div className=\"flag-marker\" style={{ '--flag-color': tag.color }}>\r\n            {/* Flag pole top cap */}\r\n            <div className=\"flag-pole-cap\" style={{ background: tag.color }}></div>\r\n            {/* Flag banner */}\r\n            <div className=\"flag-banner\" style={{ background: tag.color }}>\r\n              <span className=\"flag-name\">{tag.name}</span>\r\n              {tag.owner && <span className=\"flag-owner\">by {tag.owner}</span>}\r\n              <button\r\n                className=\"flag-remove\"\r\n                onClick={() => handleRemoveTag(tag.id)}\r\n                title=\"Remove tag\"\r\n              >\r\n                <svg width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            {/* Flag pole */}\r\n            <div\r\n              className=\"flag-pole\"\r\n              style={{\r\n                background: tag.color,\r\n                height: lineHeight\r\n              }}\r\n            ></div>\r\n          </div>\r\n          {/* Date label at bottom */}\r\n          <div className=\"flag-date-label\" style={{ color: tag.color }}>\r\n            {formatAxisDate(tag.date)}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  // Render drag preview\r\n  const renderDragPreview = () => {\r\n    if (!dragPreview || dragPreview.x === 0) return null;\r\n\r\n    return (\r\n      <div\r\n        className=\"drag-preview-container\"\r\n        style={{ left: `${dragPreview.x}px` }}\r\n      >\r\n        {/* Preview tag */}\r\n        <div\r\n          className=\"preview-tag\"\r\n          style={{\r\n            '--tag-color': dragPreview.tag.color,\r\n            borderColor: dragPreview.tag.color\r\n          }}\r\n        >\r\n          <span className=\"preview-tag-marker\" style={{ background: dragPreview.tag.color }}></span>\r\n          <span className=\"preview-tag-name\">{dragPreview.tag.name}</span>\r\n        </div>\r\n        {/* Preview dotted line */}\r\n        <div\r\n          className=\"preview-line\"\r\n          style={{ borderColor: dragPreview.tag.color }}\r\n        />\r\n        {/* Date display at bottom */}\r\n        <div className=\"preview-date\" style={{ borderColor: dragPreview.tag.color }}>\r\n          {dragPreview.formattedDate}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderChart = () => {\r\n    switch (chartType) {\r\n      case 'area':\r\n        return (\r\n          <AreaChart {...commonProps}>\r\n            <defs>\r\n              <linearGradient id=\"areaGradientTY\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                <stop offset=\"0%\" stopColor=\"#F96302\" stopOpacity={0.25}/>\r\n                <stop offset=\"100%\" stopColor=\"#F96302\" stopOpacity={0}/>\r\n              </linearGradient>\r\n              <linearGradient id=\"areaGradientLY\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                <stop offset=\"0%\" stopColor=\"#86868b\" stopOpacity={0.15}/>\r\n                <stop offset=\"100%\" stopColor=\"#86868b\" stopOpacity={0}/>\r\n              </linearGradient>\r\n            </defs>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.04)\" vertical={false} />\r\n            <XAxis\r\n              dataKey=\"date\"\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={{ stroke: 'rgba(0,0,0,0.08)' }}\r\n              tickFormatter={formatAxisDate}\r\n              interval=\"preserveStartEnd\"\r\n            />\r\n            <YAxis\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={false}\r\n              tickFormatter={formatValue}\r\n              width={Y_AXIS_WIDTH}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            {hasComparison && <Legend />}\r\n            {launchDate && (\r\n              <ReferenceLine\r\n                x={launchDate}\r\n                stroke=\"#F96302\"\r\n                strokeDasharray=\"4 4\"\r\n                strokeWidth={2}\r\n                label={{\r\n                  value: 'Launch',\r\n                  position: 'top',\r\n                  fill: '#F96302',\r\n                  fontSize: 11,\r\n                  fontWeight: 600\r\n                }}\r\n              />\r\n            )}\r\n            {hasComparison && lyDataKey && (\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey={lyDataKey}\r\n                name=\"Last Year\"\r\n                stroke=\"#86868b\"\r\n                strokeWidth={1.5}\r\n                strokeDasharray=\"4 4\"\r\n                fill=\"url(#areaGradientLY)\"\r\n                dot={false}\r\n                activeDot={{ r: 4, fill: '#86868b', stroke: '#fff', strokeWidth: 2 }}\r\n              />\r\n            )}\r\n            <Area\r\n              type=\"monotone\"\r\n              dataKey={tyDataKey}\r\n              name={hasComparison ? \"This Year\" : kpi}\r\n              stroke=\"#F96302\"\r\n              strokeWidth={2}\r\n              fill=\"url(#areaGradientTY)\"\r\n              dot={false}\r\n              activeDot={{ r: 5, fill: '#F96302', stroke: '#fff', strokeWidth: 2 }}\r\n            />\r\n          </AreaChart>\r\n        );\r\n\r\n      case 'bar':\r\n        return (\r\n          <BarChart {...commonProps}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.04)\" vertical={false} />\r\n            <XAxis\r\n              dataKey=\"date\"\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={{ stroke: 'rgba(0,0,0,0.08)' }}\r\n              tickFormatter={formatAxisDate}\r\n              interval=\"preserveStartEnd\"\r\n            />\r\n            <YAxis\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={false}\r\n              tickFormatter={formatValue}\r\n              width={Y_AXIS_WIDTH}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            {hasComparison && <Legend />}\r\n            {launchDate && (\r\n              <ReferenceLine\r\n                x={launchDate}\r\n                stroke=\"#F96302\"\r\n                strokeDasharray=\"4 4\"\r\n                strokeWidth={2}\r\n              />\r\n            )}\r\n            {hasComparison && lyDataKey && (\r\n              <Bar\r\n                dataKey={lyDataKey}\r\n                name=\"Last Year\"\r\n                fill=\"#d1d1d6\"\r\n                radius={[4, 4, 0, 0]}\r\n                maxBarSize={20}\r\n              />\r\n            )}\r\n            <Bar\r\n              dataKey={tyDataKey}\r\n              name={hasComparison ? \"This Year\" : kpi}\r\n              fill=\"#F96302\"\r\n              radius={[4, 4, 0, 0]}\r\n              maxBarSize={hasComparison ? 20 : 40}\r\n            />\r\n          </BarChart>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <LineChart {...commonProps}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(0,0,0,0.04)\" vertical={false} />\r\n            <XAxis\r\n              dataKey=\"date\"\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={{ stroke: 'rgba(0,0,0,0.08)' }}\r\n              tickFormatter={formatAxisDate}\r\n              interval=\"preserveStartEnd\"\r\n            />\r\n            <YAxis\r\n              tick={axisStyle}\r\n              tickLine={false}\r\n              axisLine={false}\r\n              tickFormatter={formatValue}\r\n              width={Y_AXIS_WIDTH}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            {hasComparison && <Legend />}\r\n            {launchDate && (\r\n              <ReferenceLine\r\n                x={launchDate}\r\n                stroke=\"#F96302\"\r\n                strokeDasharray=\"4 4\"\r\n                strokeWidth={2}\r\n                label={{\r\n                  value: 'Launch',\r\n                  position: 'top',\r\n                  fill: '#F96302',\r\n                  fontSize: 11,\r\n                  fontWeight: 600\r\n                }}\r\n              />\r\n            )}\r\n            {hasComparison && lyDataKey && (\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey={lyDataKey}\r\n                name=\"Last Year\"\r\n                stroke=\"#86868b\"\r\n                strokeWidth={1.5}\r\n                strokeDasharray=\"4 4\"\r\n                dot={false}\r\n                activeDot={{ r: 4, fill: '#86868b', stroke: '#fff', strokeWidth: 2 }}\r\n              />\r\n            )}\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey={tyDataKey}\r\n              name={hasComparison ? \"This Year\" : kpi}\r\n              stroke=\"#F96302\"\r\n              strokeWidth={2}\r\n              dot={false}\r\n              activeDot={{ r: 5, fill: '#F96302', stroke: '#fff', strokeWidth: 2 }}\r\n            />\r\n          </LineChart>\r\n        );\r\n    }\r\n  };\r\n\r\n  if (!chartData || chartData.length === 0) {\r\n    return (\r\n      <div className=\"chart-empty\">\r\n        <p>No data available for the selected period</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isBeta) {\r\n    return (\r\n      <div className=\"kpi-chart beta-restricted\">\r\n        <div className=\"chart-blur-wrapper\">\r\n          <ResponsiveContainer width=\"100%\" height={320}>\r\n            {renderChart()}\r\n          </ResponsiveContainer>\r\n        </div>\r\n        <div className=\"beta-overlay\">\r\n          <div className=\"beta-overlay-content\">\r\n            <h3>Place holder</h3>\r\n            <p>Chart visualization</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"kpi-chart-wrapper\">\r\n      <div\r\n        className={`kpi-chart ${draggedTag ? 'drop-active' : ''}`}\r\n        ref={chartContainerRef}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n      >\r\n        <ResponsiveContainer width=\"100%\" height={320}>\r\n          {renderChart()}\r\n        </ResponsiveContainer>\r\n\r\n        {/* Placed tags overlay */}\r\n        <div className=\"tags-overlay\">\r\n          {renderPlacedTags()}\r\n        </div>\r\n\r\n        {/* Drag preview overlay */}\r\n        {dragPreview && (\r\n          <div className=\"drag-preview-overlay\">\r\n            {renderDragPreview()}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tag Panel Toggle */}\r\n      <div className=\"chart-tag-controls\">\r\n        <button\r\n          className={`tag-panel-toggle ${showTagPanel ? 'active' : ''}`}\r\n          onClick={() => setShowTagPanel(!showTagPanel)}\r\n        >\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\"></path>\r\n            <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\"></line>\r\n          </svg>\r\n          <span>Add Info Tag</span>\r\n        </button>\r\n\r\n        {/* Active Tags Display */}\r\n        {chartTags && chartTags.length > 0 && (\r\n          <div className=\"active-tags\">\r\n            {chartTags.map(tag => (\r\n              <span\r\n                key={tag.id}\r\n                className=\"active-tag\"\r\n                style={{ borderColor: tag.color, color: tag.color }}\r\n              >\r\n                <span className=\"tag-marker\" style={{ background: tag.color }}></span>\r\n                {tag.name}\r\n                <span className=\"tag-date\">{formatAxisDate(tag.date)}</span>\r\n                <button onClick={() => handleRemoveTag(tag.id)} className=\"tag-remove\">\r\n                  <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                  </svg>\r\n                </button>\r\n              </span>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tag Panel */}\r\n      {showTagPanel && (\r\n        <div className=\"tag-panel\">\r\n          <div className=\"tag-panel-header\">\r\n            <h4>Drag tags onto the chart</h4>\r\n            <button className=\"tag-panel-close\" onClick={() => setShowTagPanel(false)}>\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"preset-tags\">\r\n            {PRESET_TAGS.map(tag => (\r\n              <div\r\n                key={tag.id}\r\n                className=\"draggable-tag\"\r\n                draggable\r\n                onDragStart={(e) => handleDragStart(e, tag)}\r\n                onDragEnd={handleDragEnd}\r\n                style={{ borderColor: tag.color }}\r\n              >\r\n                <span className=\"tag-marker\" style={{ background: tag.color }}></span>\r\n                {tag.name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"custom-tag-section\">\r\n            {!showCustomForm ? (\r\n              <button\r\n                className=\"add-custom-tag-btn\"\r\n                onClick={() => setShowCustomForm(true)}\r\n              >\r\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\r\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\r\n                </svg>\r\n                Create Custom Tag\r\n              </button>\r\n            ) : (\r\n              <div className=\"custom-tag-form\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Tag name\"\r\n                  value={customTagName}\r\n                  onChange={(e) => setCustomTagName(e.target.value)}\r\n                  className=\"custom-tag-input\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Your name (owner)\"\r\n                  value={customTagOwner}\r\n                  onChange={(e) => setCustomTagOwner(e.target.value)}\r\n                  className=\"custom-tag-input\"\r\n                />\r\n                <div className=\"custom-tag-actions\">\r\n                  <button\r\n                    className=\"custom-tag-cancel\"\r\n                    onClick={() => {\r\n                      setShowCustomForm(false);\r\n                      setCustomTagName('');\r\n                      setCustomTagOwner('');\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className=\"custom-tag-create\"\r\n                    onClick={handleAddCustomTag}\r\n                    disabled={!customTagName.trim() || !customTagOwner.trim()}\r\n                  >\r\n                    Create & Drag\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {draggedTag && draggedTag.isCustom && (\r\n            <div className=\"drag-instruction\">\r\n              <p>Now drag your custom tag \"{draggedTag.name}\" onto the chart</p>\r\n              <div\r\n                className=\"draggable-tag custom\"\r\n                draggable\r\n                onDragStart={(e) => handleDragStart(e, draggedTag)}\r\n                onDragEnd={handleDragEnd}\r\n              >\r\n                <span className=\"tag-marker\" style={{ background: draggedTag.color }}></span>\r\n                {draggedTag.name}\r\n                <span className=\"tag-owner\">by {draggedTag.owner}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default KPIChart;\r\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAChE,SACEC,SAAS,EAAEC,IAAI,EAAEC,SAAS,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,GAAG,EAC/CC,KAAK,EAAEC,KAAK,EAAEC,aAAa,EAAEC,OAAO,EAAEC,mBAAmB,EACzDC,aAAa,EAAEC,MAAM,QAChB,UAAU;AACjB,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAO,gBAAgB;;AAEvB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,GAAG,CAClB;EAAEC,EAAE,EAAE,cAAc;EAAEC,IAAI,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAU,CAAC,EAC9D;EAAEF,EAAE,EAAE,aAAa;EAAEC,IAAI,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAU,CAAC,EAC7D;EAAEF,EAAE,EAAE,UAAU;EAAEC,IAAI,EAAE,WAAW;EAAEC,KAAK,EAAE;AAAU,CAAC,EACvD;EAAEF,EAAE,EAAE,SAAS;EAAEC,IAAI,EAAE,aAAa;EAAEC,KAAK,EAAE;AAAU,CAAC,EACxD;EAAEF,EAAE,EAAE,OAAO;EAAEC,IAAI,EAAE,cAAc;EAAEC,KAAK,EAAE;AAAU,CAAC,CACxD;;AAED;AACA,MAAMC,aAAa,GAAG;EAAEC,GAAG,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,IAAI,EAAE,EAAE;EAAEC,MAAM,EAAE;AAAG,CAAC;AAClE,MAAMC,YAAY,GAAG,EAAE;AACvB,MAAMC,YAAY,GAAG,GAAG;AAExB,SAASC,QAAQA,CAAC;EAAEC,IAAI;EAAEC,GAAG;EAAEC,SAAS;EAAEC,MAAM;EAAEC,UAAU;EAAEC,cAAc;EAAEC,SAAS;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EACvG,MAAM;IAAEC;EAAW,CAAC,GAAGxB,OAAO,CAAC,CAAC;EAChC,MAAMyB,MAAM,GAAGD,UAAU,CAAC,CAAC;EAC3B,MAAME,iBAAiB,GAAG1C,MAAM,CAAC,IAAI,CAAC;EACtC,MAAM,CAAC2C,YAAY,EAAEC,eAAe,CAAC,GAAG7C,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC8C,aAAa,EAAEC,gBAAgB,CAAC,GAAG/C,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACgD,cAAc,EAAEC,iBAAiB,CAAC,GAAGjD,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACkD,UAAU,EAAEC,aAAa,CAAC,GAAGnD,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACoD,cAAc,EAAEC,iBAAiB,CAAC,GAAGrD,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACsD,WAAW,EAAEC,cAAc,CAAC,GAAGvD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACwD,cAAc,EAAEC,iBAAiB,CAAC,GAAGzD,QAAQ,CAAC,CAAC,CAAC;;EAEvD;EACA,MAAM0D,SAAS,GAAGrB,cAAc,IAAIA,cAAc,CAACsB,MAAM,GAAG,CAAC,GAAGtB,cAAc,GAAGL,IAAI;EACrF,MAAM4B,aAAa,GAAGvB,cAAc,IAAIA,cAAc,CAACsB,MAAM,GAAG,CAAC;;EAEjE;EACAxD,SAAS,CAAC,MAAM;IACd,MAAM0D,WAAW,GAAGA,CAAA,KAAM;MACxB,IAAIlB,iBAAiB,CAACmB,OAAO,EAAE;QAC7BL,iBAAiB,CAACd,iBAAiB,CAACmB,OAAO,CAACC,WAAW,CAAC;MAC1D;IACF,CAAC;IAEDF,WAAW,CAAC,CAAC;IACbG,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEJ,WAAW,CAAC;;IAE9C;IACA,MAAMK,cAAc,GAAG,IAAIC,cAAc,CAACN,WAAW,CAAC;IACtD,IAAIlB,iBAAiB,CAACmB,OAAO,EAAE;MAC7BI,cAAc,CAACE,OAAO,CAACzB,iBAAiB,CAACmB,OAAO,CAAC;IACnD;IAEA,OAAO,MAAM;MACXE,MAAM,CAACK,mBAAmB,CAAC,QAAQ,EAAER,WAAW,CAAC;MACjDK,cAAc,CAACI,UAAU,CAAC,CAAC;IAC7B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAIC,GAAG,IAAK;IAC3B,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKC,SAAS,IAAIC,KAAK,CAACF,GAAG,CAAC,EAAE,OAAO,GAAG;IAE/D,IAAIrC,MAAM,KAAK,UAAU,EAAE;MACzB,IAAIwC,IAAI,CAACC,GAAG,CAACJ,GAAG,CAAC,IAAI,OAAO,EAAE;QAC5B,OAAO,IAAI,CAACA,GAAG,GAAG,OAAO,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG;MAC1C;MACA,IAAIF,IAAI,CAACC,GAAG,CAACJ,GAAG,CAAC,IAAI,IAAI,EAAE;QACzB,OAAO,IAAI,CAACA,GAAG,GAAG,IAAI,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG;MACvC;MACA,OAAO,IAAIL,GAAG,CAACK,OAAO,CAAC,CAAC,CAAC,EAAE;IAC7B;IACA,IAAI1C,MAAM,KAAK,YAAY,EAAE;MAC3B,OAAO,GAAG,CAACqC,GAAG,GAAG,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG;IACrC;IACA,IAAIF,IAAI,CAACC,GAAG,CAACJ,GAAG,CAAC,IAAI,OAAO,EAAE;MAC5B,OAAO,GAAG,CAACA,GAAG,GAAG,OAAO,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG;IACzC;IACA,IAAIF,IAAI,CAACC,GAAG,CAACJ,GAAG,CAAC,IAAI,IAAI,EAAE;MACzB,OAAO,GAAG,CAACA,GAAG,GAAG,IAAI,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG;IACtC;IACA,OAAOL,GAAG,CAACM,cAAc,CAAC,CAAC;EAC7B,CAAC;EAED,MAAMC,cAAc,GAAIC,OAAO,IAAK;IAClC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,OAAO,CAAC;IAC9B,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;MAAEC,KAAK,EAAE,OAAO;MAAEC,GAAG,EAAE;IAAU,CAAC,CAAC;EAC7E,CAAC;EAED,MAAMC,cAAc,GAAIN,OAAO,IAAK;IAClC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,OAAO,CAAC;IAC9B,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;MACtCI,OAAO,EAAE,OAAO;MAChBH,KAAK,EAAE,OAAO;MACdC,GAAG,EAAE,SAAS;MACdG,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGvF,WAAW,CAAC,MAAM;IACzC,IAAI,CAACyC,iBAAiB,CAACmB,OAAO,EAAE,OAAO,IAAI;IAC3C,OAAOnB,iBAAiB,CAACmB,OAAO,CAAC4B,qBAAqB,CAAC,CAAC;EAC1D,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,iBAAiB,GAAGzF,WAAW,CAAE0F,OAAO,IAAK;IACjD,IAAI,CAAClC,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;IACnD,MAAMkC,IAAI,GAAGJ,gBAAgB,CAAC,CAAC;IAC/B,IAAI,CAACI,IAAI,EAAE,OAAO,CAAC,CAAC;IAEpB,MAAMC,aAAa,GAAGjE,YAAY,GAAGL,aAAa,CAACG,IAAI;IACvD,MAAMoE,cAAc,GAAGF,IAAI,CAACG,KAAK,GAAGF,aAAa,GAAGtE,aAAa,CAACE,KAAK;IAEvE,MAAMuE,SAAS,GAAGL,OAAO,GAAGC,IAAI,CAAClE,IAAI,GAAGmE,aAAa;IACrD,MAAMI,UAAU,GAAGvB,IAAI,CAACwB,GAAG,CAAC,CAAC,EAAExB,IAAI,CAACyB,GAAG,CAAC,CAAC,EAAEH,SAAS,GAAGF,cAAc,CAAC,CAAC;IAEvE,MAAMM,SAAS,GAAG1B,IAAI,CAAC2B,KAAK,CAACJ,UAAU,IAAIxC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC;IACjE,OAAOgB,IAAI,CAACwB,GAAG,CAAC,CAAC,EAAExB,IAAI,CAACyB,GAAG,CAACC,SAAS,EAAE3C,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC;EAC/D,CAAC,EAAE,CAACD,SAAS,EAAE+B,gBAAgB,CAAC,CAAC;;EAEjC;EACA,MAAMc,oBAAoB,GAAGrG,WAAW,CAAEsG,KAAK,IAAK;IAAA,IAAAC,qBAAA;IAClD,IAAI,CAAC/C,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,IAAI6C,KAAK,GAAG,CAAC,EAAE,OAAO,CAAC;;IAE/D;IACA,MAAMR,KAAK,GAAGxC,cAAc,IAAK,EAAAiD,qBAAA,GAAA9D,iBAAiB,CAACmB,OAAO,cAAA2C,qBAAA,uBAAzBA,qBAAA,CAA2B1C,WAAW,KAAI,CAAE;IAC7E,IAAIiC,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC;IAEzB,MAAMF,aAAa,GAAGjE,YAAY,GAAGL,aAAa,CAACG,IAAI;IACvD,MAAMoE,cAAc,GAAGC,KAAK,GAAGF,aAAa,GAAGtE,aAAa,CAACE,KAAK;;IAElE;IACA,IAAIgC,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MAC1B,OAAOmC,aAAa,GAAGC,cAAc,GAAG,CAAC;IAC3C;IAEA,MAAMG,UAAU,GAAGM,KAAK,IAAI9C,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC;IACjD,OAAOmC,aAAa,GAAII,UAAU,GAAGH,cAAe;EACtD,CAAC,EAAE,CAACrC,SAAS,EAAEF,cAAc,CAAC,CAAC;EAE/B,MAAMkD,aAAa,GAAGA,CAAC;IAAEC,MAAM;IAAEC,OAAO;IAAEC;EAAM,CAAC,KAAK;IACpD,IAAIF,MAAM,IAAIC,OAAO,IAAIA,OAAO,CAACjD,MAAM,EAAE;MACvC,MAAMqB,OAAO,GAAG,IAAIE,IAAI,CAAC2B,KAAK,CAAC,CAAC1B,kBAAkB,CAAC,OAAO,EAAE;QAC1DI,OAAO,EAAE,OAAO;QAChBH,KAAK,EAAE,OAAO;QACdC,GAAG,EAAE,SAAS;QACdG,IAAI,EAAE;MACR,CAAC,CAAC;;MAEF;MACA,MAAMsB,OAAO,GAAGxE,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEyE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAC/B,IAAI,KAAK4B,KAAK,CAAC;MAEtD,oBACE1F,OAAA;QAAK8F,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC5B/F,OAAA;UAAG8F,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAElC;QAAO;UAAAmC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACxCR,OAAO,iBACN3F,OAAA;UAAG8F,SAAS,EAAC,aAAa;UAAAC,QAAA,gBACxB/F,OAAA;YAAM8F,SAAS,EAAC,oBAAoB;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEV,OAAO,CAACvF;YAAM;UAAE;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,EACjFR,OAAO,CAACxF,IAAI;QAAA;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CACJ,EACAV,OAAO,CAACa,GAAG,CAAC,CAACC,KAAK,EAAElB,KAAK,kBACxBrF,OAAA;UAAe8F,SAAS,EAAC,eAAe;UAACM,KAAK,EAAE;YAAEhG,KAAK,EAAEmG,KAAK,CAACnG;UAAM,CAAE;UAAA2F,QAAA,gBACrE/F,OAAA;YAAM8F,SAAS,EAAC,eAAe;YAAAC,QAAA,GAAEQ,KAAK,CAACpG,IAAI,EAAC,IAAE;UAAA;YAAA6F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACpD/C,WAAW,CAACmD,KAAK,CAACC,KAAK,CAAC;QAAA,GAFnBnB,KAAK;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAGV,CACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAEV;IACA,OAAO,IAAI;EACb,CAAC;EAED,MAAMM,eAAe,GAAGA,CAACC,CAAC,EAAEC,GAAG,KAAK;IAClC3E,aAAa,CAAC2E,GAAG,CAAC;IAClBD,CAAC,CAACE,YAAY,CAACC,aAAa,GAAG,MAAM;IACrC;IACA,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACE,GAAG,GAAG,gFAAgF;IAC1FN,CAAC,CAACE,YAAY,CAACK,YAAY,CAACH,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;EACxC,CAAC;EAED,MAAMI,cAAc,GAAIR,CAAC,IAAK;IAAA,IAAAS,oBAAA;IAC5BT,CAAC,CAACU,cAAc,CAAC,CAAC;IAClBV,CAAC,CAACE,YAAY,CAACS,UAAU,GAAG,MAAM;IAElC,IAAI,CAACtF,UAAU,IAAI,CAACQ,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;IAEzD,MAAMkC,IAAI,GAAGJ,gBAAgB,CAAC,CAAC;IAC/B,IAAI,CAACI,IAAI,EAAE;IAEX,MAAM4C,SAAS,GAAG9C,iBAAiB,CAACkC,CAAC,CAACjC,OAAO,CAAC;IAC9C,MAAM8C,UAAU,IAAAJ,oBAAA,GAAG5E,SAAS,CAAC+E,SAAS,CAAC,cAAAH,oBAAA,uBAApBA,oBAAA,CAAsBrD,IAAI;;IAE7C;IACA,MAAM0D,SAAS,GAAGpC,oBAAoB,CAACkC,SAAS,CAAC;IAEjD,IAAIC,UAAU,IAAID,SAAS,IAAI,CAAC,EAAE;MAChClF,cAAc,CAAC;QACb0B,IAAI,EAAEyD,UAAU;QAChBE,aAAa,EAAEtD,cAAc,CAACoD,UAAU,CAAC;QACzCG,CAAC,EAAEF,SAAS;QACZnC,KAAK,EAAEiC,SAAS;QAChBX,GAAG,EAAE5E;MACP,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAM4F,eAAe,GAAIjB,CAAC,IAAK;IAAA,IAAAkB,sBAAA;IAC7B;IACA,MAAMlD,IAAI,IAAAkD,sBAAA,GAAGpG,iBAAiB,CAACmB,OAAO,cAAAiF,sBAAA,uBAAzBA,sBAAA,CAA2BrD,qBAAqB,CAAC,CAAC;IAC/D,IAAIG,IAAI,EAAE;MACR,MAAM;QAAED,OAAO;QAAEoD;MAAQ,CAAC,GAAGnB,CAAC;MAC9B,IAAIjC,OAAO,GAAGC,IAAI,CAAClE,IAAI,IAAIiE,OAAO,GAAGC,IAAI,CAACnE,KAAK,IAC3CsH,OAAO,GAAGnD,IAAI,CAACpE,GAAG,IAAIuH,OAAO,GAAGnD,IAAI,CAACjE,MAAM,EAAE;QAC/C2B,cAAc,CAAC,IAAI,CAAC;MACtB;IACF;EACF,CAAC;EAED,MAAM0F,UAAU,GAAIpB,CAAC,IAAK;IAAA,IAAAqB,qBAAA;IACxBrB,CAAC,CAACU,cAAc,CAAC,CAAC;IAClB,IAAI,CAACrF,UAAU,IAAI,CAACQ,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;IAEzD,MAAM8E,SAAS,GAAG9C,iBAAiB,CAACkC,CAAC,CAACjC,OAAO,CAAC;IAC9C,MAAM8C,UAAU,IAAAQ,qBAAA,GAAGxF,SAAS,CAAC+E,SAAS,CAAC,cAAAS,qBAAA,uBAApBA,qBAAA,CAAsBjE,IAAI;IAE7C,IAAIyD,UAAU,EAAE;MACd,MAAMS,MAAM,GAAG;QACb,GAAGjG,UAAU;QACb7B,EAAE,EAAE,GAAG6B,UAAU,CAAC7B,EAAE,IAAI6D,IAAI,CAACkE,GAAG,CAAC,CAAC,EAAE;QACpCnE,IAAI,EAAEyD,UAAU;QAChBD,SAAS,EAAEA;MACb,CAAC;MAED,IAAIlG,YAAY,EAAE;QAChBA,YAAY,CAAC,CAAC,IAAID,SAAS,IAAI,EAAE,CAAC,EAAE6G,MAAM,CAAC,CAAC;MAC9C;IACF;IAEAhG,aAAa,CAAC,IAAI,CAAC;IACnBI,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAM8F,aAAa,GAAGA,CAAA,KAAM;IAC1B9F,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAM+F,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAI,CAACxG,aAAa,CAACyG,IAAI,CAAC,CAAC,IAAI,CAACvG,cAAc,CAACuG,IAAI,CAAC,CAAC,EAAE;IAErD,MAAMJ,MAAM,GAAG;MACb9H,EAAE,EAAE,UAAU6D,IAAI,CAACkE,GAAG,CAAC,CAAC,EAAE;MAC1B9H,IAAI,EAAEwB,aAAa,CAACyG,IAAI,CAAC,CAAC;MAC1BC,KAAK,EAAExG,cAAc,CAACuG,IAAI,CAAC,CAAC;MAC5BhI,KAAK,EAAE,SAAS;MAChBkI,QAAQ,EAAE;IACZ,CAAC;IAEDtG,aAAa,CAACgG,MAAM,CAAC;IACrBpG,gBAAgB,CAAC,EAAE,CAAC;IACpBE,iBAAiB,CAAC,EAAE,CAAC;IACrBI,iBAAiB,CAAC,KAAK,CAAC;EAC1B,CAAC;EAED,MAAMqG,eAAe,GAAIC,KAAK,IAAK;IACjC,IAAIpH,YAAY,EAAE;MAChBA,YAAY,CAAC,CAACD,SAAS,IAAI,EAAE,EAAEsH,MAAM,CAAC5C,CAAC,IAAIA,CAAC,CAAC3F,EAAE,KAAKsI,KAAK,CAAC,CAAC;IAC7D;EACF,CAAC;EAED,MAAME,WAAW,GAAG;IAClB7H,IAAI,EAAE0B,SAAS;IACfoG,MAAM,EAAEtI;EACV,CAAC;EAED,MAAMuI,SAAS,GAAG;IAChBC,QAAQ,EAAE,EAAE;IACZC,IAAI,EAAE,SAAS;IACfC,UAAU,EAAE;EACd,CAAC;;EAED;EACA,MAAMC,SAAS,GAAGvG,aAAa,GAAG,GAAG3B,GAAG,KAAK,GAAGA,GAAG;EACnD,MAAMmI,SAAS,GAAGxG,aAAa,GAAG,GAAG3B,GAAG,KAAK,GAAG,IAAI;;EAEpD;EACA,MAAMoI,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI,CAAC/H,SAAS,IAAIA,SAAS,CAACqB,MAAM,KAAK,CAAC,IAAI,CAACD,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;IAC7F,IAAIH,cAAc,KAAK,CAAC,EAAE,OAAO,IAAI;IAErC,MAAM8G,UAAU,GAAGxI,YAAY,GAAGN,aAAa,CAACC,GAAG,GAAGD,aAAa,CAACI,MAAM,GAAG,EAAE;IAE/E,OAAOU,SAAS,CAACmF,GAAG,CAAEK,GAAG,IAAK;MAC5B;MACA,IAAIW,SAAS,GAAGX,GAAG,CAACW,SAAS;MAC7B,IAAIA,SAAS,KAAKhE,SAAS,IAAIgE,SAAS,GAAG,CAAC,IAAIA,SAAS,IAAI/E,SAAS,CAACC,MAAM,EAAE;QAC7E8E,SAAS,GAAG/E,SAAS,CAAC6G,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACvF,IAAI,KAAK6C,GAAG,CAAC7C,IAAI,CAAC;MAC3D;MAEA,IAAIwD,SAAS,KAAK,CAAC,CAAC,IAAIA,SAAS,IAAI/E,SAAS,CAACC,MAAM,EAAE,OAAO,IAAI;MAElE,MAAM8G,IAAI,GAAGlE,oBAAoB,CAACkC,SAAS,CAAC;MAC5C,IAAIgC,IAAI,KAAK,CAAC,IAAIhC,SAAS,KAAK,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC;;MAEhD,oBACEtH,OAAA;QAEE8F,SAAS,EAAC,sBAAsB;QAChCM,KAAK,EAAE;UAAE5F,IAAI,EAAE,GAAG8I,IAAI;QAAK,CAAE;QAAAvD,QAAA,gBAG7B/F,OAAA;UAAK8F,SAAS,EAAC,aAAa;UAACM,KAAK,EAAE;YAAE,cAAc,EAAEO,GAAG,CAACvG;UAAM,CAAE;UAAA2F,QAAA,gBAEhE/F,OAAA;YAAK8F,SAAS,EAAC,eAAe;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEM,GAAG,CAACvG;YAAM;UAAE;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAEvEnG,OAAA;YAAK8F,SAAS,EAAC,aAAa;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEM,GAAG,CAACvG;YAAM,CAAE;YAAA2F,QAAA,gBAC5D/F,OAAA;cAAM8F,SAAS,EAAC,WAAW;cAAAC,QAAA,EAAEY,GAAG,CAACxG;YAAI;cAAA6F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,EAC5CQ,GAAG,CAAC0B,KAAK,iBAAIrI,OAAA;cAAM8F,SAAS,EAAC,YAAY;cAAAC,QAAA,GAAC,KAAG,EAACY,GAAG,CAAC0B,KAAK;YAAA;cAAArC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAChEnG,OAAA;cACE8F,SAAS,EAAC,aAAa;cACvByD,OAAO,EAAEA,CAAA,KAAMhB,eAAe,CAAC5B,GAAG,CAACzG,EAAE,CAAE;cACvCsJ,KAAK,EAAC,YAAY;cAAAzD,QAAA,eAElB/F,OAAA;gBAAK6E,KAAK,EAAC,IAAI;gBAAC4E,MAAM,EAAC,IAAI;gBAACC,OAAO,EAAC,WAAW;gBAACZ,IAAI,EAAC,MAAM;gBAACa,MAAM,EAAC,cAAc;gBAACC,WAAW,EAAC,GAAG;gBAAA7D,QAAA,gBAC/F/F,OAAA;kBAAM6J,EAAE,EAAC,IAAI;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC;gBAAI;kBAAAhE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC3CnG,OAAA;kBAAM6J,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,IAAI;kBAACC,EAAE,EAAC;gBAAI;kBAAAhE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENnG,OAAA;YACE8F,SAAS,EAAC,WAAW;YACrBM,KAAK,EAAE;cACLC,UAAU,EAAEM,GAAG,CAACvG,KAAK;cACrBqJ,MAAM,EAAEN;YACV;UAAE;YAAAnD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eAENnG,OAAA;UAAK8F,SAAS,EAAC,iBAAiB;UAACM,KAAK,EAAE;YAAEhG,KAAK,EAAEuG,GAAG,CAACvG;UAAM,CAAE;UAAA2F,QAAA,EAC1DnC,cAAc,CAAC+C,GAAG,CAAC7C,IAAI;QAAC;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtB,CAAC;MAAA,GAnCDQ,GAAG,CAACzG,EAAE;QAAA8F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAoCR,CAAC;IAEV,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAM8D,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAAC9H,WAAW,IAAIA,WAAW,CAACuF,CAAC,KAAK,CAAC,EAAE,OAAO,IAAI;IAEpD,oBACE1H,OAAA;MACE8F,SAAS,EAAC,wBAAwB;MAClCM,KAAK,EAAE;QAAE5F,IAAI,EAAE,GAAG2B,WAAW,CAACuF,CAAC;MAAK,CAAE;MAAA3B,QAAA,gBAGtC/F,OAAA;QACE8F,SAAS,EAAC,aAAa;QACvBM,KAAK,EAAE;UACL,aAAa,EAAEjE,WAAW,CAACwE,GAAG,CAACvG,KAAK;UACpC8J,WAAW,EAAE/H,WAAW,CAACwE,GAAG,CAACvG;QAC/B,CAAE;QAAA2F,QAAA,gBAEF/F,OAAA;UAAM8F,SAAS,EAAC,oBAAoB;UAACM,KAAK,EAAE;YAAEC,UAAU,EAAElE,WAAW,CAACwE,GAAG,CAACvG;UAAM;QAAE;UAAA4F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC1FnG,OAAA;UAAM8F,SAAS,EAAC,kBAAkB;UAAAC,QAAA,EAAE5D,WAAW,CAACwE,GAAG,CAACxG;QAAI;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,eAENnG,OAAA;QACE8F,SAAS,EAAC,cAAc;QACxBM,KAAK,EAAE;UAAE8D,WAAW,EAAE/H,WAAW,CAACwE,GAAG,CAACvG;QAAM;MAAE;QAAA4F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC,eAEFnG,OAAA;QAAK8F,SAAS,EAAC,cAAc;QAACM,KAAK,EAAE;UAAE8D,WAAW,EAAE/H,WAAW,CAACwE,GAAG,CAACvG;QAAM,CAAE;QAAA2F,QAAA,EACzE5D,WAAW,CAACsF;MAAa;QAAAzB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,MAAMgE,WAAW,GAAGA,CAAA,KAAM;IACxB,QAAQpJ,SAAS;MACf,KAAK,MAAM;QACT,oBACEf,OAAA,CAACb,SAAS;UAAA,GAAKuJ,WAAW;UAAA3C,QAAA,gBACxB/F,OAAA;YAAA+F,QAAA,gBACE/F,OAAA;cAAgBE,EAAE,EAAC,gBAAgB;cAAC2J,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAAAjE,QAAA,gBAC7D/F,OAAA;gBAAMoK,MAAM,EAAC,IAAI;gBAACC,SAAS,EAAC,SAAS;gBAACC,WAAW,EAAE;cAAK;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC,eAC1DnG,OAAA;gBAAMoK,MAAM,EAAC,MAAM;gBAACC,SAAS,EAAC,SAAS;gBAACC,WAAW,EAAE;cAAE;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,eACjBnG,OAAA;cAAgBE,EAAE,EAAC,gBAAgB;cAAC2J,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAAAjE,QAAA,gBAC7D/F,OAAA;gBAAMoK,MAAM,EAAC,IAAI;gBAACC,SAAS,EAAC,SAAS;gBAACC,WAAW,EAAE;cAAK;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC,eAC1DnG,OAAA;gBAAMoK,MAAM,EAAC,MAAM;gBAACC,SAAS,EAAC,SAAS;gBAACC,WAAW,EAAE;cAAE;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACb,CAAC,eACPnG,OAAA,CAACP,aAAa;YAAC8K,eAAe,EAAC,KAAK;YAACZ,MAAM,EAAC,kBAAkB;YAACa,QAAQ,EAAE;UAAM;YAAAxE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClFnG,OAAA,CAACT,KAAK;YACJkL,OAAO,EAAC,MAAM;YACdC,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE;cAAEjB,MAAM,EAAE;YAAmB,CAAE;YACzCkB,aAAa,EAAEjH,cAAe;YAC9BkH,QAAQ,EAAC;UAAkB;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eACFnG,OAAA,CAACR,KAAK;YACJkL,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE,KAAM;YAChBC,aAAa,EAAEzH,WAAY;YAC3ByB,KAAK,EAAEnE;UAAa;YAAAsF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrB,CAAC,eACFnG,OAAA,CAACN,OAAO;YAACqL,OAAO,eAAE/K,OAAA,CAACuF,aAAa;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EACtC1D,aAAa,iBAAIzC,OAAA,CAACH,MAAM;YAAAmG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAC3BlF,UAAU,iBACTjB,OAAA,CAACJ,aAAa;YACZ8H,CAAC,EAAEzG,UAAW;YACd0I,MAAM,EAAC,SAAS;YAChBY,eAAe,EAAC,KAAK;YACrBX,WAAW,EAAE,CAAE;YACflE,KAAK,EAAE;cACLc,KAAK,EAAE,QAAQ;cACfwE,QAAQ,EAAE,KAAK;cACflC,IAAI,EAAE,SAAS;cACfD,QAAQ,EAAE,EAAE;cACZE,UAAU,EAAE;YACd;UAAE;YAAA/C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACF,EACA1D,aAAa,IAAIwG,SAAS,iBACzBjJ,OAAA,CAACZ,IAAI;YACH6L,IAAI,EAAC,UAAU;YACfR,OAAO,EAAExB,SAAU;YACnB9I,IAAI,EAAC,WAAW;YAChBwJ,MAAM,EAAC,SAAS;YAChBC,WAAW,EAAE,GAAI;YACjBW,eAAe,EAAC,KAAK;YACrBzB,IAAI,EAAC,sBAAsB;YAC3BoC,GAAG,EAAE,KAAM;YACXC,SAAS,EAAE;cAAEC,CAAC,EAAE,CAAC;cAAEtC,IAAI,EAAE,SAAS;cAAEa,MAAM,EAAE,MAAM;cAAEC,WAAW,EAAE;YAAE;UAAE;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CACF,eACDnG,OAAA,CAACZ,IAAI;YACH6L,IAAI,EAAC,UAAU;YACfR,OAAO,EAAEzB,SAAU;YACnB7I,IAAI,EAAEsC,aAAa,GAAG,WAAW,GAAG3B,GAAI;YACxC6I,MAAM,EAAC,SAAS;YAChBC,WAAW,EAAE,CAAE;YACfd,IAAI,EAAC,sBAAsB;YAC3BoC,GAAG,EAAE,KAAM;YACXC,SAAS,EAAE;cAAEC,CAAC,EAAE,CAAC;cAAEtC,IAAI,EAAE,SAAS;cAAEa,MAAM,EAAE,MAAM;cAAEC,WAAW,EAAE;YAAE;UAAE;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACO,CAAC;MAGhB,KAAK,KAAK;QACR,oBACEnG,OAAA,CAACX,QAAQ;UAAA,GAAKqJ,WAAW;UAAA3C,QAAA,gBACvB/F,OAAA,CAACP,aAAa;YAAC8K,eAAe,EAAC,KAAK;YAACZ,MAAM,EAAC,kBAAkB;YAACa,QAAQ,EAAE;UAAM;YAAAxE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClFnG,OAAA,CAACT,KAAK;YACJkL,OAAO,EAAC,MAAM;YACdC,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE;cAAEjB,MAAM,EAAE;YAAmB,CAAE;YACzCkB,aAAa,EAAEjH,cAAe;YAC9BkH,QAAQ,EAAC;UAAkB;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eACFnG,OAAA,CAACR,KAAK;YACJkL,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE,KAAM;YAChBC,aAAa,EAAEzH,WAAY;YAC3ByB,KAAK,EAAEnE;UAAa;YAAAsF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrB,CAAC,eACFnG,OAAA,CAACN,OAAO;YAACqL,OAAO,eAAE/K,OAAA,CAACuF,aAAa;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EACtC1D,aAAa,iBAAIzC,OAAA,CAACH,MAAM;YAAAmG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAC3BlF,UAAU,iBACTjB,OAAA,CAACJ,aAAa;YACZ8H,CAAC,EAAEzG,UAAW;YACd0I,MAAM,EAAC,SAAS;YAChBY,eAAe,EAAC,KAAK;YACrBX,WAAW,EAAE;UAAE;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CACF,EACA1D,aAAa,IAAIwG,SAAS,iBACzBjJ,OAAA,CAACV,GAAG;YACFmL,OAAO,EAAExB,SAAU;YACnB9I,IAAI,EAAC,WAAW;YAChB2I,IAAI,EAAC,SAAS;YACduC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;YACrBC,UAAU,EAAE;UAAG;YAAAtF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CACF,eACDnG,OAAA,CAACV,GAAG;YACFmL,OAAO,EAAEzB,SAAU;YACnB7I,IAAI,EAAEsC,aAAa,GAAG,WAAW,GAAG3B,GAAI;YACxCgI,IAAI,EAAC,SAAS;YACduC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;YACrBC,UAAU,EAAE7I,aAAa,GAAG,EAAE,GAAG;UAAG;YAAAuD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACM,CAAC;MAGf;QACE,oBACEnG,OAAA,CAACf,SAAS;UAAA,GAAKyJ,WAAW;UAAA3C,QAAA,gBACxB/F,OAAA,CAACP,aAAa;YAAC8K,eAAe,EAAC,KAAK;YAACZ,MAAM,EAAC,kBAAkB;YAACa,QAAQ,EAAE;UAAM;YAAAxE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClFnG,OAAA,CAACT,KAAK;YACJkL,OAAO,EAAC,MAAM;YACdC,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE;cAAEjB,MAAM,EAAE;YAAmB,CAAE;YACzCkB,aAAa,EAAEjH,cAAe;YAC9BkH,QAAQ,EAAC;UAAkB;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eACFnG,OAAA,CAACR,KAAK;YACJkL,IAAI,EAAE9B,SAAU;YAChB+B,QAAQ,EAAE,KAAM;YAChBC,QAAQ,EAAE,KAAM;YAChBC,aAAa,EAAEzH,WAAY;YAC3ByB,KAAK,EAAEnE;UAAa;YAAAsF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrB,CAAC,eACFnG,OAAA,CAACN,OAAO;YAACqL,OAAO,eAAE/K,OAAA,CAACuF,aAAa;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EACtC1D,aAAa,iBAAIzC,OAAA,CAACH,MAAM;YAAAmG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAC3BlF,UAAU,iBACTjB,OAAA,CAACJ,aAAa;YACZ8H,CAAC,EAAEzG,UAAW;YACd0I,MAAM,EAAC,SAAS;YAChBY,eAAe,EAAC,KAAK;YACrBX,WAAW,EAAE,CAAE;YACflE,KAAK,EAAE;cACLc,KAAK,EAAE,QAAQ;cACfwE,QAAQ,EAAE,KAAK;cACflC,IAAI,EAAE,SAAS;cACfD,QAAQ,EAAE,EAAE;cACZE,UAAU,EAAE;YACd;UAAE;YAAA/C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACF,EACA1D,aAAa,IAAIwG,SAAS,iBACzBjJ,OAAA,CAACd,IAAI;YACH+L,IAAI,EAAC,UAAU;YACfR,OAAO,EAAExB,SAAU;YACnB9I,IAAI,EAAC,WAAW;YAChBwJ,MAAM,EAAC,SAAS;YAChBC,WAAW,EAAE,GAAI;YACjBW,eAAe,EAAC,KAAK;YACrBW,GAAG,EAAE,KAAM;YACXC,SAAS,EAAE;cAAEC,CAAC,EAAE,CAAC;cAAEtC,IAAI,EAAE,SAAS;cAAEa,MAAM,EAAE,MAAM;cAAEC,WAAW,EAAE;YAAE;UAAE;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CACF,eACDnG,OAAA,CAACd,IAAI;YACH+L,IAAI,EAAC,UAAU;YACfR,OAAO,EAAEzB,SAAU;YACnB7I,IAAI,EAAEsC,aAAa,GAAG,WAAW,GAAG3B,GAAI;YACxC6I,MAAM,EAAC,SAAS;YAChBC,WAAW,EAAE,CAAE;YACfsB,GAAG,EAAE,KAAM;YACXC,SAAS,EAAE;cAAEC,CAAC,EAAE,CAAC;cAAEtC,IAAI,EAAE,SAAS;cAAEa,MAAM,EAAE,MAAM;cAAEC,WAAW,EAAE;YAAE;UAAE;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACO,CAAC;IAElB;EACF,CAAC;EAED,IAAI,CAAC5D,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;IACxC,oBACExC,OAAA;MAAK8F,SAAS,EAAC,aAAa;MAAAC,QAAA,eAC1B/F,OAAA;QAAA+F,QAAA,EAAG;MAAyC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C,CAAC;EAEV;EAEA,IAAI5E,MAAM,EAAE;IACV,oBACEvB,OAAA;MAAK8F,SAAS,EAAC,2BAA2B;MAAAC,QAAA,gBACxC/F,OAAA;QAAK8F,SAAS,EAAC,oBAAoB;QAAAC,QAAA,eACjC/F,OAAA,CAACL,mBAAmB;UAACkF,KAAK,EAAC,MAAM;UAAC4E,MAAM,EAAE,GAAI;UAAA1D,QAAA,EAC3CoE,WAAW,CAAC;QAAC;UAAAnE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,eACNnG,OAAA;QAAK8F,SAAS,EAAC,cAAc;QAAAC,QAAA,eAC3B/F,OAAA;UAAK8F,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACnC/F,OAAA;YAAA+F,QAAA,EAAI;UAAY;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACrBnG,OAAA;YAAA+F,QAAA,EAAG;UAAmB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACEnG,OAAA;IAAK8F,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAChC/F,OAAA;MACE8F,SAAS,EAAE,aAAa/D,UAAU,GAAG,aAAa,GAAG,EAAE,EAAG;MAC1DwJ,GAAG,EAAE/J,iBAAkB;MACvBgK,UAAU,EAAEtE,cAAe;MAC3BuE,WAAW,EAAE9D,eAAgB;MAC7B+D,MAAM,EAAE5D,UAAW;MAAA/B,QAAA,gBAEnB/F,OAAA,CAACL,mBAAmB;QAACkF,KAAK,EAAC,MAAM;QAAC4E,MAAM,EAAE,GAAI;QAAA1D,QAAA,EAC3CoE,WAAW,CAAC;MAAC;QAAAnE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC,eAGtBnG,OAAA;QAAK8F,SAAS,EAAC,cAAc;QAAAC,QAAA,EAC1BmD,gBAAgB,CAAC;MAAC;QAAAlD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB,CAAC,EAGLhE,WAAW,iBACVnC,OAAA;QAAK8F,SAAS,EAAC,sBAAsB;QAAAC,QAAA,EAClCkE,iBAAiB,CAAC;MAAC;QAAAjE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGNnG,OAAA;MAAK8F,SAAS,EAAC,oBAAoB;MAAAC,QAAA,gBACjC/F,OAAA;QACE8F,SAAS,EAAE,oBAAoBrE,YAAY,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC9D8H,OAAO,EAAEA,CAAA,KAAM7H,eAAe,CAAC,CAACD,YAAY,CAAE;QAAAsE,QAAA,gBAE9C/F,OAAA;UAAK6E,KAAK,EAAC,IAAI;UAAC4E,MAAM,EAAC,IAAI;UAACC,OAAO,EAAC,WAAW;UAACZ,IAAI,EAAC,MAAM;UAACa,MAAM,EAAC,cAAc;UAACC,WAAW,EAAC,GAAG;UAAC+B,aAAa,EAAC,OAAO;UAACC,cAAc,EAAC,OAAO;UAAA7F,QAAA,gBAC5I/F,OAAA;YAAMqJ,CAAC,EAAC;UAAgF;YAAArD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAChGnG,OAAA;YAAM6J,EAAE,EAAC,GAAG;YAACC,EAAE,EAAC,GAAG;YAACC,EAAE,EAAC,MAAM;YAACC,EAAE,EAAC;UAAG;YAAAhE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC,eACNnG,OAAA;UAAA+F,QAAA,EAAM;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,EAGRhF,SAAS,IAAIA,SAAS,CAACqB,MAAM,GAAG,CAAC,iBAChCxC,OAAA;QAAK8F,SAAS,EAAC,aAAa;QAAAC,QAAA,EACzB5E,SAAS,CAACmF,GAAG,CAACK,GAAG,iBAChB3G,OAAA;UAEE8F,SAAS,EAAC,YAAY;UACtBM,KAAK,EAAE;YAAE8D,WAAW,EAAEvD,GAAG,CAACvG,KAAK;YAAEA,KAAK,EAAEuG,GAAG,CAACvG;UAAM,CAAE;UAAA2F,QAAA,gBAEpD/F,OAAA;YAAM8F,SAAS,EAAC,YAAY;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEM,GAAG,CAACvG;YAAM;UAAE;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,EACrEQ,GAAG,CAACxG,IAAI,eACTH,OAAA;YAAM8F,SAAS,EAAC,UAAU;YAAAC,QAAA,EAAEnC,cAAc,CAAC+C,GAAG,CAAC7C,IAAI;UAAC;YAAAkC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC5DnG,OAAA;YAAQuJ,OAAO,EAAEA,CAAA,KAAMhB,eAAe,CAAC5B,GAAG,CAACzG,EAAE,CAAE;YAAC4F,SAAS,EAAC,YAAY;YAAAC,QAAA,eACpE/F,OAAA;cAAK6E,KAAK,EAAC,IAAI;cAAC4E,MAAM,EAAC,IAAI;cAACC,OAAO,EAAC,WAAW;cAACZ,IAAI,EAAC,MAAM;cAACa,MAAM,EAAC,cAAc;cAACC,WAAW,EAAC,GAAG;cAAA7D,QAAA,gBAC/F/F,OAAA;gBAAM6J,EAAE,EAAC,IAAI;gBAACC,EAAE,EAAC,GAAG;gBAACC,EAAE,EAAC,GAAG;gBAACC,EAAE,EAAC;cAAI;gBAAAhE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC3CnG,OAAA;gBAAM6J,EAAE,EAAC,GAAG;gBAACC,EAAE,EAAC,GAAG;gBAACC,EAAE,EAAC,IAAI;gBAACC,EAAE,EAAC;cAAI;gBAAAhE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA,GAZJQ,GAAG,CAACzG,EAAE;UAAA8F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAaP,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGL1E,YAAY,iBACXzB,OAAA;MAAK8F,SAAS,EAAC,WAAW;MAAAC,QAAA,gBACxB/F,OAAA;QAAK8F,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/B/F,OAAA;UAAA+F,QAAA,EAAI;QAAwB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjCnG,OAAA;UAAQ8F,SAAS,EAAC,iBAAiB;UAACyD,OAAO,EAAEA,CAAA,KAAM7H,eAAe,CAAC,KAAK,CAAE;UAAAqE,QAAA,eACxE/F,OAAA;YAAK6E,KAAK,EAAC,IAAI;YAAC4E,MAAM,EAAC,IAAI;YAACC,OAAO,EAAC,WAAW;YAACZ,IAAI,EAAC,MAAM;YAACa,MAAM,EAAC,cAAc;YAACC,WAAW,EAAC,GAAG;YAAA7D,QAAA,gBAC/F/F,OAAA;cAAM6J,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC;YAAI;cAAAhE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC3CnG,OAAA;cAAM6J,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC;YAAI;cAAAhE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAENnG,OAAA;QAAK8F,SAAS,EAAC,aAAa;QAAAC,QAAA,EACzB9F,WAAW,CAACqG,GAAG,CAACK,GAAG,iBAClB3G,OAAA;UAEE8F,SAAS,EAAC,eAAe;UACzB+F,SAAS;UACTC,WAAW,EAAGpF,CAAC,IAAKD,eAAe,CAACC,CAAC,EAAEC,GAAG,CAAE;UAC5CoF,SAAS,EAAE7D,aAAc;UACzB9B,KAAK,EAAE;YAAE8D,WAAW,EAAEvD,GAAG,CAACvG;UAAM,CAAE;UAAA2F,QAAA,gBAElC/F,OAAA;YAAM8F,SAAS,EAAC,YAAY;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEM,GAAG,CAACvG;YAAM;UAAE;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,EACrEQ,GAAG,CAACxG,IAAI;QAAA,GARJwG,GAAG,CAACzG,EAAE;UAAA8F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OASR,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAENnG,OAAA;QAAK8F,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAChC,CAAC9D,cAAc,gBACdjC,OAAA;UACE8F,SAAS,EAAC,oBAAoB;UAC9ByD,OAAO,EAAEA,CAAA,KAAMrH,iBAAiB,CAAC,IAAI,CAAE;UAAA6D,QAAA,gBAEvC/F,OAAA;YAAK6E,KAAK,EAAC,IAAI;YAAC4E,MAAM,EAAC,IAAI;YAACC,OAAO,EAAC,WAAW;YAACZ,IAAI,EAAC,MAAM;YAACa,MAAM,EAAC,cAAc;YAACC,WAAW,EAAC,GAAG;YAAA7D,QAAA,gBAC/F/F,OAAA;cAAM6J,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC;YAAI;cAAAhE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC5CnG,OAAA;cAAM6J,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC,IAAI;cAACC,EAAE,EAAC;YAAI;cAAAhE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzC,CAAC,qBAER;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,gBAETnG,OAAA;UAAK8F,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9B/F,OAAA;YACEiL,IAAI,EAAC,MAAM;YACXe,WAAW,EAAC,UAAU;YACtBxF,KAAK,EAAE7E,aAAc;YACrBsK,QAAQ,EAAGvF,CAAC,IAAK9E,gBAAgB,CAAC8E,CAAC,CAACwF,MAAM,CAAC1F,KAAK,CAAE;YAClDV,SAAS,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7B,CAAC,eACFnG,OAAA;YACEiL,IAAI,EAAC,MAAM;YACXe,WAAW,EAAC,mBAAmB;YAC/BxF,KAAK,EAAE3E,cAAe;YACtBoK,QAAQ,EAAGvF,CAAC,IAAK5E,iBAAiB,CAAC4E,CAAC,CAACwF,MAAM,CAAC1F,KAAK,CAAE;YACnDV,SAAS,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7B,CAAC,eACFnG,OAAA;YAAK8F,SAAS,EAAC,oBAAoB;YAAAC,QAAA,gBACjC/F,OAAA;cACE8F,SAAS,EAAC,mBAAmB;cAC7ByD,OAAO,EAAEA,CAAA,KAAM;gBACbrH,iBAAiB,CAAC,KAAK,CAAC;gBACxBN,gBAAgB,CAAC,EAAE,CAAC;gBACpBE,iBAAiB,CAAC,EAAE,CAAC;cACvB,CAAE;cAAAiE,QAAA,EACH;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTnG,OAAA;cACE8F,SAAS,EAAC,mBAAmB;cAC7ByD,OAAO,EAAEpB,kBAAmB;cAC5BgE,QAAQ,EAAE,CAACxK,aAAa,CAACyG,IAAI,CAAC,CAAC,IAAI,CAACvG,cAAc,CAACuG,IAAI,CAAC,CAAE;cAAArC,QAAA,EAC3D;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MACN;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAELpE,UAAU,IAAIA,UAAU,CAACuG,QAAQ,iBAChCtI,OAAA;QAAK8F,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/B/F,OAAA;UAAA+F,QAAA,GAAG,6BAA0B,EAAChE,UAAU,CAAC5B,IAAI,EAAC,mBAAgB;QAAA;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAClEnG,OAAA;UACE8F,SAAS,EAAC,sBAAsB;UAChC+F,SAAS;UACTC,WAAW,EAAGpF,CAAC,IAAKD,eAAe,CAACC,CAAC,EAAE3E,UAAU,CAAE;UACnDgK,SAAS,EAAE7D,aAAc;UAAAnC,QAAA,gBAEzB/F,OAAA;YAAM8F,SAAS,EAAC,YAAY;YAACM,KAAK,EAAE;cAAEC,UAAU,EAAEtE,UAAU,CAAC3B;YAAM;UAAE;YAAA4F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,EAC5EpE,UAAU,CAAC5B,IAAI,eAChBH,OAAA;YAAM8F,SAAS,EAAC,WAAW;YAAAC,QAAA,GAAC,KAAG,EAAChE,UAAU,CAACsG,KAAK;UAAA;YAAArC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC9E,EAAA,CA7tBQT,QAAQ;EAAA,QACQd,OAAO;AAAA;AAAAsM,EAAA,GADvBxL,QAAQ;AA+tBjB,eAAeA,QAAQ;AAAC,IAAAwL,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}