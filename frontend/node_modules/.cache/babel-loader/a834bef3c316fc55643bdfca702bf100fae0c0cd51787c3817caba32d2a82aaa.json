{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import api from'../utils/api';import'./FeedbackButton.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FEEDBACK_TOPICS=[{id:'metrics',label:'Metric Cards',description:'KPI values, lift calculations, formatting'},{id:'chart',label:'Chart & Trends',description:'Daily chart, event tags, display modes'},{id:'filters',label:'Filters & Controls',description:'Period, segments, device, page type'},{id:'analysis',label:'Advanced Analysis',description:'Pre/post comparison table'},{id:'reports',label:'Reports & Email',description:'PDF reports, email sending'},{id:'general',label:'General',description:'Overall experience, bugs, suggestions'}];// Mini visual previews for each topic\nfunction TopicPreview(_ref){let{topicId}=_ref;switch(topicId){case'metrics':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Metric Cards\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-metrics\",children:[{name:'VISITS',lift:'19.4%',change:'+2.4M',pct:75},{name:'ORDERS',lift:'14.8%',change:'+40K',pct:60},{name:'REVENUE',lift:'13.6%',change:'+$41.9M',pct:55}].map(m=>/*#__PURE__*/_jsx(\"div\",{className:\"preview-metric-circle-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-circle-ring\",children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 44 44\",className:\"preview-circle-svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"22\",cy:\"22\",r:\"18\",fill:\"none\",stroke:\"rgba(0,0,0,0.04)\",strokeWidth:\"3\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"22\",cy:\"22\",r:\"18\",fill:\"none\",stroke:\"#34C759\",strokeWidth:\"3\",strokeDasharray:\"\".concat(m.pct*1.13,\" 113\"),strokeLinecap:\"round\",transform:\"rotate(-90 22 22)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-circle-inner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-circle-kpi\",children:m.name}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-circle-lift\",children:m.lift}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-circle-change\",children:m.change})]})]})},m.name))})]});case'chart':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Daily KPI Chart\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-chart-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-chart-title\",children:\"Revenue\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-chart-legend\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-legend-dot ty\"}),\" TY\",/*#__PURE__*/_jsx(\"span\",{className:\"preview-legend-dot ly\"}),\" LY\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-chart-area\",children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 200 60\",preserveAspectRatio:\"none\",className:\"preview-chart-svg\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"0,40 25,35 50,30 75,25 100,28 125,20 150,22 175,15 200,18\",fill:\"none\",stroke:\"rgba(238,113,37,0.8)\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"0,45 25,42 50,38 75,40 100,36 125,33 150,35 175,30 200,32\",fill:\"none\",stroke:\"rgba(238,113,37,0.3)\",strokeWidth:\"1.5\",strokeDasharray:\"4,3\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"100\",y1:\"0\",x2:\"100\",y2:\"60\",stroke:\"rgba(238,113,37,0.4)\",strokeWidth:\"1\",strokeDasharray:\"3,3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-chart-tag\",style:{left:'48%'},children:\"Launch\"})]})]})]});case'filters':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Filter Controls\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-filters-v2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-filter-col\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-filter-heading\",children:\"PERIOD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-toggle-group-v2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"7D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"30D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"60D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"90D\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2 active\",children:\"All\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-filter-col\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-filter-heading\",children:\"BUSINESS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-toggle-group-v2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2 active\",children:\"All\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"B2B\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"B2C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-filter-col\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-filter-heading\",children:\"DEVICE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-toggle-group-v2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2 active\",children:\"All\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"MW\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"DTW\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-toggle-v2\",children:\"App\"})]})]})]})]});case'analysis':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Pre/Post Comparison\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-table-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-th kpi\",children:\"KPI\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-th\",children:\"Pre Lift\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-th\",children:\"Post Lift\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-th highlight\",children:\"Comp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-table-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-td kpi\",children:\"Visits\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td green\",children:\"+2.1%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td green\",children:\"+4.8%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td highlight green\",children:\"+2.7%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-table-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-td kpi\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td red\",children:\"-0.5%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td green\",children:\"+1.2%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td highlight green\",children:\"+1.7%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-table-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-td kpi\",children:\"Revenue\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td green\",children:\"+3.4%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td green\",children:\"+6.1%\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-td highlight green\",children:\"+2.7%\"})]})]})]});case'reports':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Report & Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-report\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"preview-report-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-report-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-report-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"rgba(238,113,37,0.8)\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"22\",y1:\"2\",x2:\"11\",y2:\"13\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"22 2 15 22 11 13 2 9 22 2\"})]})}),/*#__PURE__*/_jsx(\"span\",{children:\"Send Report\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-report-recipients\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-recipient-chip\",children:\"stakeholder@thd.com\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-recipient-chip\",children:\"team@thd.com\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-report-btn\",children:\"Send via Outlook\"})]})})]});case'general':return/*#__PURE__*/_jsxs(\"div\",{className:\"topic-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-label\",children:\"Full Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-dash-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-dash-logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-dash-nav\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-tab active\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-tab\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-dash-filters\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-pill\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-pill active\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-pill\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-pill\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-dash-cards\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-card\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-card\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-dash-card\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-dash-chart-area\"})]})]});default:return null;}}function FeedbackButton(_ref2){let{useCase}=_ref2;const[isOpen,setIsOpen]=useState(false);const[selectedTopic,setSelectedTopic]=useState(null);const[feedbackText,setFeedbackText]=useState('');const[rating,setRating]=useState(null);const[sending,setSending]=useState(false);const[sent,setSent]=useState(false);const[error,setError]=useState(null);const[previewTopic,setPreviewTopic]=useState(null);const[previewPos,setPreviewPos]=useState(null);const popupRef=useRef(null);const buttonRef=useRef(null);useEffect(()=>{const handleClickOutside=e=>{if(isOpen&&popupRef.current&&!popupRef.current.contains(e.target)&&buttonRef.current&&!buttonRef.current.contains(e.target)){handleClose();}};const handleEscape=e=>{if(e.key==='Escape'&&isOpen){handleClose();}};document.addEventListener('mousedown',handleClickOutside);document.addEventListener('keydown',handleEscape);return()=>{document.removeEventListener('mousedown',handleClickOutside);document.removeEventListener('keydown',handleEscape);};},[isOpen]);// Lock body scroll when popup is open\nuseEffect(()=>{if(isOpen){const scrollY=window.scrollY;document.body.style.position='fixed';document.body.style.top=\"-\".concat(scrollY,\"px\");document.body.style.left='0';document.body.style.right='0';document.body.style.overflow='hidden';}else{const scrollY=document.body.style.top;document.body.style.position='';document.body.style.top='';document.body.style.left='';document.body.style.right='';document.body.style.overflow='';window.scrollTo(0,parseInt(scrollY||'0')*-1);}return()=>{if(document.body.style.position==='fixed'){const scrollY=document.body.style.top;document.body.style.position='';document.body.style.top='';document.body.style.left='';document.body.style.right='';document.body.style.overflow='';window.scrollTo(0,parseInt(scrollY||'0')*-1);}};},[isOpen]);const handleClose=()=>{setIsOpen(false);// Reset after animation\nsetTimeout(()=>{setSelectedTopic(null);setFeedbackText('');setRating(null);setSent(false);setError(null);},200);};const handleToggle=()=>{if(isOpen){handleClose();}else{setIsOpen(true);}};const handleTopicSelect=topic=>{setSelectedTopic(topic);setError(null);};const handleBack=()=>{setSelectedTopic(null);setFeedbackText('');setRating(null);setError(null);};const handleSubmit=async()=>{if(!feedbackText.trim()){setError('Please enter your feedback');return;}setSending(true);setError(null);try{const response=await api.post('/api/feedback',{topic:selectedTopic.id,topic_label:selectedTopic.label,feedback:feedbackText.trim(),rating:rating,use_case:useCase||'N/A'});if(response.data.success){setSent(true);}else{setError(response.data.error||'Failed to save feedback');}}catch(err){var _err$response,_err$response$data;console.error('Feedback submit error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to save feedback');}finally{setSending(false);}};const renderContent=()=>{if(sent){return/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"feedback-success-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"40\",height:\"40\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22 4 12 14.01 9 11.01\"})]})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Thank you\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your feedback has been recorded.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"feedback-done-btn\",onClick:handleClose,children:\"Done\"})]});}if(selectedTopic){return/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-form-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"feedback-back-btn\",onClick:handleBack,children:/*#__PURE__*/_jsx(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"15 18 9 12 15 6\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-form-title\",children:/*#__PURE__*/_jsx(\"span\",{className:\"feedback-topic-tag\",children:selectedTopic.label})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-rating-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"feedback-rating-label\",children:\"How would you rate this area?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-rating-options\",children:[1,2,3,4,5].map(val=>/*#__PURE__*/_jsx(\"button\",{className:\"feedback-rating-btn \".concat(rating===val?'active':''),onClick:()=>setRating(val),children:val},val))}),/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-rating-labels\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Poor\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Excellent\"})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"feedback-textarea\",placeholder:\"Share your thoughts, suggestions, or issues...\",value:feedbackText,onChange:e=>setFeedbackText(e.target.value),rows:4,autoFocus:true}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-error\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"9\",y2:\"15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"15\"})]}),/*#__PURE__*/_jsx(\"span\",{children:error})]}),/*#__PURE__*/_jsx(\"button\",{className:\"feedback-submit-btn\",onClick:handleSubmit,disabled:sending||!feedbackText.trim(),children:sending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"feedback-spinner\"}),\"Submitting...\"]}):'Submit Feedback'})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-topics\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-popup-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Share Feedback\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select an area of the dashboard\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-topic-grid\",children:FEEDBACK_TOPICS.map(topic=>/*#__PURE__*/_jsxs(\"button\",{className:\"feedback-topic-card\",onClick:()=>handleTopicSelect(topic),children:[/*#__PURE__*/_jsx(\"span\",{className:\"feedback-topic-label\",children:topic.label}),/*#__PURE__*/_jsx(\"span\",{className:\"feedback-topic-desc\",children:topic.description}),/*#__PURE__*/_jsx(\"div\",{className:\"feedback-topic-info-wrapper\",onMouseEnter:e=>{e.stopPropagation();const rect=e.currentTarget.getBoundingClientRect();setPreviewPos({left:rect.right+12,centerY:rect.top+rect.height/2});setPreviewTopic(topic.id);},onMouseLeave:()=>{setPreviewTopic(null);setPreviewPos(null);},children:/*#__PURE__*/_jsx(\"span\",{className:\"feedback-topic-info-btn\",role:\"button\",onClick:e=>{e.stopPropagation();if(previewTopic===topic.id){setPreviewTopic(null);setPreviewPos(null);}else{const rect=e.currentTarget.parentElement.getBoundingClientRect();setPreviewPos({left:rect.right+12,centerY:rect.top+rect.height/2});setPreviewTopic(topic.id);}},children:\"i\"})})]},topic.id))})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{ref:buttonRef,className:\"feedback-floating-btn \".concat(isOpen?'active':''),onClick:handleToggle,children:/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"})})}),isOpen&&/*#__PURE__*/_jsx(\"div\",{ref:popupRef,className:\"feedback-popup\",children:renderContent()}),previewTopic&&previewPos&&/*#__PURE__*/_jsx(\"div\",{className:\"feedback-preview-tooltip\",style:{position:'fixed',left:previewPos.left,top:Math.max(12,Math.min(previewPos.centerY,window.innerHeight-12)),transform:'translateY(-50%)'},children:/*#__PURE__*/_jsx(TopicPreview,{topicId:previewTopic})})]});}export default FeedbackButton;","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FEEDBACK_TOPICS","id","label","description","TopicPreview","_ref","topicId","className","children","name","lift","change","pct","map","m","viewBox","cx","cy","r","fill","stroke","strokeWidth","strokeDasharray","concat","strokeLinecap","transform","preserveAspectRatio","points","x1","y1","x2","y2","style","left","width","height","FeedbackButton","_ref2","useCase","isOpen","setIsOpen","selectedTopic","setSelectedTopic","feedbackText","setFeedbackText","rating","setRating","sending","setSending","sent","setSent","error","setError","previewTopic","setPreviewTopic","previewPos","setPreviewPos","popupRef","buttonRef","handleClickOutside","e","current","contains","target","handleClose","handleEscape","key","document","addEventListener","removeEventListener","scrollY","window","body","position","top","right","overflow","scrollTo","parseInt","setTimeout","handleToggle","handleTopicSelect","topic","handleBack","handleSubmit","trim","response","post","topic_label","feedback","use_case","data","success","err","_err$response","_err$response$data","console","renderContent","d","onClick","strokeLinejoin","val","placeholder","value","onChange","rows","autoFocus","disabled","onMouseEnter","stopPropagation","rect","currentTarget","getBoundingClientRect","centerY","onMouseLeave","role","parentElement","ref","Math","max","min","innerHeight"],"sources":["C:/Users/AkashPatil/THD-Dashboard/frontend/src/components/FeedbackButton.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../utils/api';\r\nimport './FeedbackButton.css';\r\n\r\nconst FEEDBACK_TOPICS = [\r\n  { id: 'metrics', label: 'Metric Cards', description: 'KPI values, lift calculations, formatting' },\r\n  { id: 'chart', label: 'Chart & Trends', description: 'Daily chart, event tags, display modes' },\r\n  { id: 'filters', label: 'Filters & Controls', description: 'Period, segments, device, page type' },\r\n  { id: 'analysis', label: 'Advanced Analysis', description: 'Pre/post comparison table' },\r\n  { id: 'reports', label: 'Reports & Email', description: 'PDF reports, email sending' },\r\n  { id: 'general', label: 'General', description: 'Overall experience, bugs, suggestions' },\r\n];\r\n\r\n// Mini visual previews for each topic\r\nfunction TopicPreview({ topicId }) {\r\n  switch (topicId) {\r\n    case 'metrics':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Metric Cards</div>\r\n          <div className=\"preview-metrics\">\r\n            {[\r\n              { name: 'VISITS', lift: '19.4%', change: '+2.4M', pct: 75 },\r\n              { name: 'ORDERS', lift: '14.8%', change: '+40K', pct: 60 },\r\n              { name: 'REVENUE', lift: '13.6%', change: '+$41.9M', pct: 55 },\r\n            ].map((m) => (\r\n              <div key={m.name} className=\"preview-metric-circle-card\">\r\n                <div className=\"preview-circle-ring\">\r\n                  <svg viewBox=\"0 0 44 44\" className=\"preview-circle-svg\">\r\n                    <circle cx=\"22\" cy=\"22\" r=\"18\" fill=\"none\" stroke=\"rgba(0,0,0,0.04)\" strokeWidth=\"3\" />\r\n                    <circle cx=\"22\" cy=\"22\" r=\"18\" fill=\"none\" stroke=\"#34C759\" strokeWidth=\"3\"\r\n                      strokeDasharray={`${m.pct * 1.13} 113`}\r\n                      strokeLinecap=\"round\"\r\n                      transform=\"rotate(-90 22 22)\" />\r\n                  </svg>\r\n                  <div className=\"preview-circle-inner\">\r\n                    <span className=\"preview-circle-kpi\">{m.name}</span>\r\n                    <span className=\"preview-circle-lift\">{m.lift}</span>\r\n                    <span className=\"preview-circle-change\">{m.change}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      );\r\n    case 'chart':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Daily KPI Chart</div>\r\n          <div className=\"preview-chart\">\r\n            <div className=\"preview-chart-header\">\r\n              <span className=\"preview-chart-title\">Revenue</span>\r\n              <div className=\"preview-chart-legend\">\r\n                <span className=\"preview-legend-dot ty\" /> TY\r\n                <span className=\"preview-legend-dot ly\" /> LY\r\n              </div>\r\n            </div>\r\n            <div className=\"preview-chart-area\">\r\n              <svg viewBox=\"0 0 200 60\" preserveAspectRatio=\"none\" className=\"preview-chart-svg\">\r\n                <polyline points=\"0,40 25,35 50,30 75,25 100,28 125,20 150,22 175,15 200,18\" fill=\"none\" stroke=\"rgba(238,113,37,0.8)\" strokeWidth=\"2\" />\r\n                <polyline points=\"0,45 25,42 50,38 75,40 100,36 125,33 150,35 175,30 200,32\" fill=\"none\" stroke=\"rgba(238,113,37,0.3)\" strokeWidth=\"1.5\" strokeDasharray=\"4,3\" />\r\n                <line x1=\"100\" y1=\"0\" x2=\"100\" y2=\"60\" stroke=\"rgba(238,113,37,0.4)\" strokeWidth=\"1\" strokeDasharray=\"3,3\" />\r\n              </svg>\r\n              <div className=\"preview-chart-tag\" style={{ left: '48%' }}>Launch</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    case 'filters':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Filter Controls</div>\r\n          <div className=\"preview-filters-v2\">\r\n            <div className=\"preview-filter-col\">\r\n              <span className=\"preview-filter-heading\">PERIOD</span>\r\n              <div className=\"preview-toggle-group-v2\">\r\n                <span className=\"preview-toggle-v2\">7D</span>\r\n                <span className=\"preview-toggle-v2\">30D</span>\r\n                <span className=\"preview-toggle-v2\">60D</span>\r\n                <span className=\"preview-toggle-v2\">90D</span>\r\n                <span className=\"preview-toggle-v2 active\">All</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"preview-filter-col\">\r\n              <span className=\"preview-filter-heading\">BUSINESS</span>\r\n              <div className=\"preview-toggle-group-v2\">\r\n                <span className=\"preview-toggle-v2 active\">All</span>\r\n                <span className=\"preview-toggle-v2\">B2B</span>\r\n                <span className=\"preview-toggle-v2\">B2C</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"preview-filter-col\">\r\n              <span className=\"preview-filter-heading\">DEVICE</span>\r\n              <div className=\"preview-toggle-group-v2\">\r\n                <span className=\"preview-toggle-v2 active\">All</span>\r\n                <span className=\"preview-toggle-v2\">MW</span>\r\n                <span className=\"preview-toggle-v2\">DTW</span>\r\n                <span className=\"preview-toggle-v2\">App</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    case 'analysis':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Pre/Post Comparison</div>\r\n          <div className=\"preview-table\">\r\n            <div className=\"preview-table-header\">\r\n              <span className=\"preview-th kpi\">KPI</span>\r\n              <span className=\"preview-th\">Pre Lift</span>\r\n              <span className=\"preview-th\">Post Lift</span>\r\n              <span className=\"preview-th highlight\">Comp</span>\r\n            </div>\r\n            <div className=\"preview-table-row\">\r\n              <span className=\"preview-td kpi\">Visits</span>\r\n              <span className=\"preview-td green\">+2.1%</span>\r\n              <span className=\"preview-td green\">+4.8%</span>\r\n              <span className=\"preview-td highlight green\">+2.7%</span>\r\n            </div>\r\n            <div className=\"preview-table-row\">\r\n              <span className=\"preview-td kpi\">Orders</span>\r\n              <span className=\"preview-td red\">-0.5%</span>\r\n              <span className=\"preview-td green\">+1.2%</span>\r\n              <span className=\"preview-td highlight green\">+1.7%</span>\r\n            </div>\r\n            <div className=\"preview-table-row\">\r\n              <span className=\"preview-td kpi\">Revenue</span>\r\n              <span className=\"preview-td green\">+3.4%</span>\r\n              <span className=\"preview-td green\">+6.1%</span>\r\n              <span className=\"preview-td highlight green\">+2.7%</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    case 'reports':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Report & Email</div>\r\n          <div className=\"preview-report\">\r\n            <div className=\"preview-report-modal\">\r\n              <div className=\"preview-report-header\">\r\n                <div className=\"preview-report-icon\">\r\n                  <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"rgba(238,113,37,0.8)\" strokeWidth=\"2\">\r\n                    <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\" />\r\n                    <polygon points=\"22 2 15 22 11 13 2 9 22 2\" />\r\n                  </svg>\r\n                </div>\r\n                <span>Send Report</span>\r\n              </div>\r\n              <div className=\"preview-report-recipients\">\r\n                <div className=\"preview-recipient-chip\">stakeholder@thd.com</div>\r\n                <div className=\"preview-recipient-chip\">team@thd.com</div>\r\n              </div>\r\n              <div className=\"preview-report-btn\">Send via Outlook</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    case 'general':\r\n      return (\r\n        <div className=\"topic-preview\">\r\n          <div className=\"preview-label\">Full Dashboard</div>\r\n          <div className=\"preview-dashboard\">\r\n            <div className=\"preview-dash-header\">\r\n              <div className=\"preview-dash-logo\" />\r\n              <div className=\"preview-dash-nav\">\r\n                <span className=\"preview-dash-tab active\" />\r\n                <span className=\"preview-dash-tab\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"preview-dash-filters\">\r\n              <span className=\"preview-dash-pill\" />\r\n              <span className=\"preview-dash-pill active\" />\r\n              <span className=\"preview-dash-pill\" />\r\n              <span className=\"preview-dash-pill\" />\r\n            </div>\r\n            <div className=\"preview-dash-cards\">\r\n              <span className=\"preview-dash-card\" />\r\n              <span className=\"preview-dash-card\" />\r\n              <span className=\"preview-dash-card\" />\r\n            </div>\r\n            <div className=\"preview-dash-chart-area\" />\r\n          </div>\r\n        </div>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction FeedbackButton({ useCase }) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedTopic, setSelectedTopic] = useState(null);\r\n  const [feedbackText, setFeedbackText] = useState('');\r\n  const [rating, setRating] = useState(null);\r\n  const [sending, setSending] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [previewTopic, setPreviewTopic] = useState(null);\r\n  const [previewPos, setPreviewPos] = useState(null);\r\n  const popupRef = useRef(null);\r\n  const buttonRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (\r\n        isOpen &&\r\n        popupRef.current &&\r\n        !popupRef.current.contains(e.target) &&\r\n        buttonRef.current &&\r\n        !buttonRef.current.contains(e.target)\r\n      ) {\r\n        handleClose();\r\n      }\r\n    };\r\n\r\n    const handleEscape = (e) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        handleClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  // Lock body scroll when popup is open\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const scrollY = window.scrollY;\r\n      document.body.style.position = 'fixed';\r\n      document.body.style.top = `-${scrollY}px`;\r\n      document.body.style.left = '0';\r\n      document.body.style.right = '0';\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      const scrollY = document.body.style.top;\r\n      document.body.style.position = '';\r\n      document.body.style.top = '';\r\n      document.body.style.left = '';\r\n      document.body.style.right = '';\r\n      document.body.style.overflow = '';\r\n      window.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n    }\r\n    return () => {\r\n      if (document.body.style.position === 'fixed') {\r\n        const scrollY = document.body.style.top;\r\n        document.body.style.position = '';\r\n        document.body.style.top = '';\r\n        document.body.style.left = '';\r\n        document.body.style.right = '';\r\n        document.body.style.overflow = '';\r\n        window.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n      }\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleClose = () => {\r\n    setIsOpen(false);\r\n    // Reset after animation\r\n    setTimeout(() => {\r\n      setSelectedTopic(null);\r\n      setFeedbackText('');\r\n      setRating(null);\r\n      setSent(false);\r\n      setError(null);\r\n    }, 200);\r\n  };\r\n\r\n  const handleToggle = () => {\r\n    if (isOpen) {\r\n      handleClose();\r\n    } else {\r\n      setIsOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleTopicSelect = (topic) => {\r\n    setSelectedTopic(topic);\r\n    setError(null);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setSelectedTopic(null);\r\n    setFeedbackText('');\r\n    setRating(null);\r\n    setError(null);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!feedbackText.trim()) {\r\n      setError('Please enter your feedback');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.post('/api/feedback', {\r\n        topic: selectedTopic.id,\r\n        topic_label: selectedTopic.label,\r\n        feedback: feedbackText.trim(),\r\n        rating: rating,\r\n        use_case: useCase || 'N/A',\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setSent(true);\r\n      } else {\r\n        setError(response.data.error || 'Failed to save feedback');\r\n      }\r\n    } catch (err) {\r\n      console.error('Feedback submit error:', err);\r\n      setError(err.response?.data?.error || 'Failed to save feedback');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (sent) {\r\n      return (\r\n        <div className=\"feedback-success\">\r\n          <div className=\"feedback-success-icon\">\r\n            <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n              <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n            </svg>\r\n          </div>\r\n          <h3>Thank you</h3>\r\n          <p>Your feedback has been recorded.</p>\r\n          <button className=\"feedback-done-btn\" onClick={handleClose}>Done</button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (selectedTopic) {\r\n      return (\r\n        <div className=\"feedback-form\">\r\n          <div className=\"feedback-form-header\">\r\n            <button className=\"feedback-back-btn\" onClick={handleBack}>\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <polyline points=\"15 18 9 12 15 6\"></polyline>\r\n              </svg>\r\n            </button>\r\n            <div className=\"feedback-form-title\">\r\n              <span className=\"feedback-topic-tag\">{selectedTopic.label}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"feedback-rating-section\">\r\n            <span className=\"feedback-rating-label\">How would you rate this area?</span>\r\n            <div className=\"feedback-rating-options\">\r\n              {[1, 2, 3, 4, 5].map((val) => (\r\n                <button\r\n                  key={val}\r\n                  className={`feedback-rating-btn ${rating === val ? 'active' : ''}`}\r\n                  onClick={() => setRating(val)}\r\n                >\r\n                  {val}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"feedback-rating-labels\">\r\n              <span>Poor</span>\r\n              <span>Excellent</span>\r\n            </div>\r\n          </div>\r\n\r\n          <textarea\r\n            className=\"feedback-textarea\"\r\n            placeholder=\"Share your thoughts, suggestions, or issues...\"\r\n            value={feedbackText}\r\n            onChange={(e) => setFeedbackText(e.target.value)}\r\n            rows={4}\r\n            autoFocus\r\n          />\r\n\r\n          {error && (\r\n            <div className=\"feedback-error\">\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n              </svg>\r\n              <span>{error}</span>\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            className=\"feedback-submit-btn\"\r\n            onClick={handleSubmit}\r\n            disabled={sending || !feedbackText.trim()}\r\n          >\r\n            {sending ? (\r\n              <>\r\n                <span className=\"feedback-spinner\"></span>\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              'Submit Feedback'\r\n            )}\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"feedback-topics\">\r\n        <div className=\"feedback-popup-header\">\r\n          <h3>Share Feedback</h3>\r\n          <p>Select an area of the dashboard</p>\r\n        </div>\r\n        <div className=\"feedback-topic-grid\">\r\n          {FEEDBACK_TOPICS.map((topic) => (\r\n            <button\r\n              key={topic.id}\r\n              className=\"feedback-topic-card\"\r\n              onClick={() => handleTopicSelect(topic)}\r\n            >\r\n              <span className=\"feedback-topic-label\">{topic.label}</span>\r\n              <span className=\"feedback-topic-desc\">{topic.description}</span>\r\n              <div\r\n                className=\"feedback-topic-info-wrapper\"\r\n                onMouseEnter={(e) => {\r\n                  e.stopPropagation();\r\n                  const rect = e.currentTarget.getBoundingClientRect();\r\n                  setPreviewPos({ left: rect.right + 12, centerY: rect.top + rect.height / 2 });\r\n                  setPreviewTopic(topic.id);\r\n                }}\r\n                onMouseLeave={() => { setPreviewTopic(null); setPreviewPos(null); }}\r\n              >\r\n                <span\r\n                  className=\"feedback-topic-info-btn\"\r\n                  role=\"button\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    if (previewTopic === topic.id) {\r\n                      setPreviewTopic(null);\r\n                      setPreviewPos(null);\r\n                    } else {\r\n                      const rect = e.currentTarget.parentElement.getBoundingClientRect();\r\n                      setPreviewPos({ left: rect.right + 12, centerY: rect.top + rect.height / 2 });\r\n                      setPreviewTopic(topic.id);\r\n                    }\r\n                  }}\r\n                >\r\n                  i\r\n                </span>\r\n              </div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        ref={buttonRef}\r\n        className={`feedback-floating-btn ${isOpen ? 'active' : ''}`}\r\n        onClick={handleToggle}\r\n      >\r\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n          <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\r\n        </svg>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div ref={popupRef} className=\"feedback-popup\">\r\n          {renderContent()}\r\n        </div>\r\n      )}\r\n\r\n      {previewTopic && previewPos && (\r\n        <div\r\n          className=\"feedback-preview-tooltip\"\r\n          style={{\r\n            position: 'fixed',\r\n            left: previewPos.left,\r\n            top: Math.max(12, Math.min(previewPos.centerY, window.innerHeight - 12)),\r\n            transform: 'translateY(-50%)',\r\n          }}\r\n        >\r\n          <TopicPreview topicId={previewTopic} />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FeedbackButton;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}