{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../utils/api';import'./SendReportModal.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const kpiLabels={visits:'Visits',orders:'Orders',revenue:'Revenue',cvr:'Conversion Rate',aov:'Avg Order Value',rpv:'Revenue Per Visit'};function SendReportModal(_ref){let{useCase,period,periodLabel,onClose,businessSegment,deviceType,pageType,chartTags=[],selectedKPI='visits'}=_ref;const[stakeholders,setStakeholders]=useState([]);const[selectedRecipients,setSelectedRecipients]=useState([]);const[customEmail,setCustomEmail]=useState('');const[loading,setLoading]=useState(true);const[sending,setSending]=useState(false);const[sent,setSent]=useState(false);const[error,setError]=useState(null);const[outlookStatus,setOutlookStatus]=useState(null);const[checkingOutlook,setCheckingOutlook]=useState(true);const[chartDisplay,setChartDisplay]=useState('both');// 'both', 'ty', 'ly'\nuseEffect(()=>{fetchStakeholders();checkOutlookStatus();},[useCase]);useEffect(()=>{const handleEscape=e=>{if(e.key==='Escape')onClose();};document.addEventListener('keydown',handleEscape);document.body.style.overflow='hidden';return()=>{document.removeEventListener('keydown',handleEscape);document.body.style.overflow='';};},[onClose]);const checkOutlookStatus=async()=>{setCheckingOutlook(true);try{const response=await api.get('/api/email/current-user');setOutlookStatus(response.data);}catch(err){console.error('Error checking Outlook status:',err);setOutlookStatus({success:false,message:'Unable to connect to email service'});}finally{setCheckingOutlook(false);}};const fetchStakeholders=async()=>{try{const response=await api.get('/api/stakeholders',{params:{use_case:useCase}});const emails=response.data.stakeholders||[];setStakeholders(emails);setSelectedRecipients(emails);}catch(err){console.error('Error fetching stakeholders:',err);}finally{setLoading(false);}};const toggleRecipient=email=>{setSelectedRecipients(prev=>prev.includes(email)?prev.filter(e=>e!==email):[...prev,email]);};const isValidEmail=email=>{return email&&email.includes('@')&&email.includes('.');};const addCustomEmail=()=>{const email=customEmail.trim().toLowerCase();if(isValidEmail(email)&&!selectedRecipients.includes(email)){setSelectedRecipients(prev=>[...prev,email]);setCustomEmail('');setError(null);}else if(!isValidEmail(email)){setError('Please enter a valid email address');}};const removeRecipient=email=>{setSelectedRecipients(prev=>prev.filter(e=>e!==email));};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();addCustomEmail();}};const getReportPayload=()=>({use_case:useCase,period:period,recipients:selectedRecipients,business_segment:businessSegment,device_type:deviceType,page_type:pageType,chart_tags:chartTags,chart_display:chartDisplay,selected_kpi:selectedKPI});const handleSend=async()=>{if(selectedRecipients.length===0){setError('Please add at least one recipient');return;}if(!(outlookStatus!==null&&outlookStatus!==void 0&&outlookStatus.success)){setError((outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Outlook is not ready');return;}setSending(true);setError(null);try{const response=await api.post('/api/report/send',getReportPayload());if(response.data.success){setSent(true);}else{setError(response.data.error||'Failed to send report');}}catch(err){var _err$response,_err$response$data;console.error('Send error:',err);const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Failed to send report';setError(errorMessage);}finally{setSending(false);}};const handleOpenDraft=async()=>{if(!(outlookStatus!==null&&outlookStatus!==void 0&&outlookStatus.success)){setError((outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Outlook is not ready');return;}setSending(true);setError(null);try{const response=await api.post('/api/report/draft',getReportPayload());if(response.data.success){onClose();}else{setError(response.data.error||'Failed to open draft');}}catch(err){var _err$response2,_err$response2$data;console.error('Draft error:',err);const errorMessage=((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message||'Failed to open draft';setError(errorMessage);}finally{setSending(false);}};const handlePreview=async()=>{try{const token=localStorage.getItem('token');// Use POST for preview to send chart tags\nconst response=await fetch('/api/report/preview',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({use_case:useCase,period:period,business_segment:businessSegment!=='All'?businessSegment:undefined,device_type:deviceType!=='All'?deviceType:undefined,page_type:pageType!=='All'?pageType:undefined,chart_tags:chartTags,chart_display:chartDisplay,selected_kpi:selectedKPI})});if(!response.ok){const data=await response.json();setError(data.error||'Failed to generate preview');return;}const blob=await response.blob();const blobUrl=URL.createObjectURL(blob);window.open(blobUrl,'_blank');}catch(err){console.error('Preview error:',err);setError('Failed to generate preview');}};const handleBackdropClick=e=>{if(e.target===e.currentTarget)onClose();};const handleRetryOutlook=()=>{setError(null);checkOutlookStatus();};if(sent){return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:handleBackdropClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"send-modal success-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22 4 12 14.01 9 11.01\"})]})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Report Sent\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"The report has been sent to \",selectedRecipients.length,\" recipient\",selectedRecipients.length!==1?'s':'',\" via Outlook.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"sent-recipients\",children:selectedRecipients.map(email=>/*#__PURE__*/_jsx(\"span\",{className:\"sent-email\",children:email},email))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:onClose,children:\"Done\"})]})});}const outlookReady=(outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.success)===true;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:handleBackdropClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"send-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Send Report\"}),/*#__PURE__*/_jsx(\"p\",{className:\"header-subtitle\",children:useCase})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[checkingOutlook?/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-status-checking\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Checking Outlook status...\"})]}):outlookReady?/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-user-info outlook-ready\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22 4 12 14.01 9 11.01\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Sending from: \",/*#__PURE__*/_jsx(\"strong\",{children:outlookStatus.email})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-user-info outlook-error\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"8\",x2:\"12\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"16\",x2:\"12.01\",y2:\"16\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-error-content\",children:[/*#__PURE__*/_jsx(\"span\",{children:(outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Unable to connect to Outlook'}),/*#__PURE__*/_jsxs(\"button\",{className:\"retry-btn\",onClick:handleRetryOutlook,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"23 4 23 10 17 10\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"})]}),\"Retry\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-preview-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-label\",children:\"Report Period\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-value\",children:periodLabel})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"preview-btn\",onClick:handlePreview,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"3\"})]}),\"Preview PDF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-options-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"Chart Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-options-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-option-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"option-label\",children:\"KPI:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"option-value\",children:kpiLabels[selectedKPI]||selectedKPI})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-option-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"option-label\",children:\"Display:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-display-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toggle-option \".concat(chartDisplay==='both'?'active':''),onClick:()=>setChartDisplay('both'),children:\"Both\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-option \".concat(chartDisplay==='ty'?'active':''),onClick:()=>setChartDisplay('ty'),children:\"TY Only\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-option \".concat(chartDisplay==='ly'?'active':''),onClick:()=>setChartDisplay('ly'),children:\"LY Only\"})]})]})]}),chartTags&&chartTags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"chart-tags-info\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"tags-count\",children:[chartTags.length,\" event\",chartTags.length!==1?'s':'',\" will be included\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipients-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"Recipients\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-recipients\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),\"Loading stakeholders...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[stakeholders.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholders-list\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"list-label\",children:\"Stakeholders from config:\"}),stakeholders.map(email=>/*#__PURE__*/_jsxs(\"label\",{className:\"recipient-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedRecipients.includes(email),onChange:()=>toggleRecipient(email)}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-custom\"}),/*#__PURE__*/_jsx(\"span\",{className:\"recipient-email\",children:email})]},email))]}),stakeholders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-stakeholders\",children:\"No stakeholders configured. Add recipients below.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-recipient\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Add email address\",value:customEmail,onChange:e=>{setCustomEmail(e.target.value);setError(null);},onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:addCustomEmail,disabled:!customEmail.trim(),children:\"Add\"})]}),selectedRecipients.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-recipients\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"list-label\",children:[\"Will send to (\",selectedRecipients.length,\"):\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"recipient-tags\",children:selectedRecipients.map(email=>/*#__PURE__*/_jsxs(\"span\",{className:\"recipient-tag\",children:[email,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeRecipient(email),children:/*#__PURE__*/_jsxs(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})]},email))})]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"9\",y2:\"15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"15\"})]}),/*#__PURE__*/_jsx(\"span\",{children:error})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-tertiary\",onClick:handleOpenDraft,disabled:sending||!outlookReady,title:outlookReady?\"Open in Outlook to review before sending\":\"Outlook not ready\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]}),\"Open in Outlook\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleSend,disabled:sending||selectedRecipients.length===0||!outlookReady,children:sending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\"Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"22\",y1:\"2\",x2:\"11\",y2:\"13\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"22 2 15 22 11 13 2 9 22 2\"})]}),\"Send Report\"]})})]})]})});}export default SendReportModal;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","kpiLabels","visits","orders","revenue","cvr","aov","rpv","SendReportModal","_ref","useCase","period","periodLabel","onClose","businessSegment","deviceType","pageType","chartTags","selectedKPI","stakeholders","setStakeholders","selectedRecipients","setSelectedRecipients","customEmail","setCustomEmail","loading","setLoading","sending","setSending","sent","setSent","error","setError","outlookStatus","setOutlookStatus","checkingOutlook","setCheckingOutlook","chartDisplay","setChartDisplay","fetchStakeholders","checkOutlookStatus","handleEscape","e","key","document","addEventListener","body","style","overflow","removeEventListener","response","get","data","err","console","success","message","params","use_case","emails","toggleRecipient","email","prev","includes","filter","isValidEmail","addCustomEmail","trim","toLowerCase","removeRecipient","handleKeyDown","preventDefault","getReportPayload","recipients","business_segment","device_type","page_type","chart_tags","chart_display","selected_kpi","handleSend","length","post","_err$response","_err$response$data","errorMessage","handleOpenDraft","_err$response2","_err$response2$data","handlePreview","token","localStorage","getItem","fetch","method","headers","concat","JSON","stringify","undefined","ok","json","blob","blobUrl","URL","createObjectURL","window","open","handleBackdropClick","target","currentTarget","handleRetryOutlook","className","onClick","children","width","height","viewBox","fill","stroke","strokeWidth","d","points","map","outlookReady","x1","y1","x2","y2","cx","cy","r","type","checked","onChange","placeholder","value","onKeyDown","disabled","title"],"sources":["C:/Users/AkashPatil/THD-Dashboard/frontend/src/components/SendReportModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../utils/api';\r\nimport './SendReportModal.css';\r\n\r\nconst kpiLabels = {\r\n  visits: 'Visits',\r\n  orders: 'Orders',\r\n  revenue: 'Revenue',\r\n  cvr: 'Conversion Rate',\r\n  aov: 'Avg Order Value',\r\n  rpv: 'Revenue Per Visit'\r\n};\r\n\r\nfunction SendReportModal({\r\n  useCase,\r\n  period,\r\n  periodLabel,\r\n  onClose,\r\n  businessSegment,\r\n  deviceType,\r\n  pageType,\r\n  chartTags = [],\r\n  selectedKPI = 'visits'\r\n}) {\r\n  const [stakeholders, setStakeholders] = useState([]);\r\n  const [selectedRecipients, setSelectedRecipients] = useState([]);\r\n  const [customEmail, setCustomEmail] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [sending, setSending] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [outlookStatus, setOutlookStatus] = useState(null);\r\n  const [checkingOutlook, setCheckingOutlook] = useState(true);\r\n  const [chartDisplay, setChartDisplay] = useState('both'); // 'both', 'ty', 'ly'\r\n\r\n  useEffect(() => {\r\n    fetchStakeholders();\r\n    checkOutlookStatus();\r\n  }, [useCase]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    document.addEventListener('keydown', handleEscape);\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [onClose]);\r\n\r\n  const checkOutlookStatus = async () => {\r\n    setCheckingOutlook(true);\r\n    try {\r\n      const response = await api.get('/api/email/current-user');\r\n      setOutlookStatus(response.data);\r\n    } catch (err) {\r\n      console.error('Error checking Outlook status:', err);\r\n      setOutlookStatus({\r\n        success: false,\r\n        message: 'Unable to connect to email service'\r\n      });\r\n    } finally {\r\n      setCheckingOutlook(false);\r\n    }\r\n  };\r\n\r\n  const fetchStakeholders = async () => {\r\n    try {\r\n      const response = await api.get('/api/stakeholders', {\r\n        params: { use_case: useCase }\r\n      });\r\n      const emails = response.data.stakeholders || [];\r\n      setStakeholders(emails);\r\n      setSelectedRecipients(emails);\r\n    } catch (err) {\r\n      console.error('Error fetching stakeholders:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleRecipient = (email) => {\r\n    setSelectedRecipients(prev =>\r\n      prev.includes(email)\r\n        ? prev.filter(e => e !== email)\r\n        : [...prev, email]\r\n    );\r\n  };\r\n\r\n  const isValidEmail = (email) => {\r\n    return email && email.includes('@') && email.includes('.');\r\n  };\r\n\r\n  const addCustomEmail = () => {\r\n    const email = customEmail.trim().toLowerCase();\r\n    if (isValidEmail(email) && !selectedRecipients.includes(email)) {\r\n      setSelectedRecipients(prev => [...prev, email]);\r\n      setCustomEmail('');\r\n      setError(null);\r\n    } else if (!isValidEmail(email)) {\r\n      setError('Please enter a valid email address');\r\n    }\r\n  };\r\n\r\n  const removeRecipient = (email) => {\r\n    setSelectedRecipients(prev => prev.filter(e => e !== email));\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      addCustomEmail();\r\n    }\r\n  };\r\n\r\n  const getReportPayload = () => ({\r\n    use_case: useCase,\r\n    period: period,\r\n    recipients: selectedRecipients,\r\n    business_segment: businessSegment,\r\n    device_type: deviceType,\r\n    page_type: pageType,\r\n    chart_tags: chartTags,\r\n    chart_display: chartDisplay,\r\n    selected_kpi: selectedKPI\r\n  });\r\n\r\n  const handleSend = async () => {\r\n    if (selectedRecipients.length === 0) {\r\n      setError('Please add at least one recipient');\r\n      return;\r\n    }\r\n\r\n    if (!outlookStatus?.success) {\r\n      setError(outlookStatus?.message || 'Outlook is not ready');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.post('/api/report/send', getReportPayload());\r\n\r\n      if (response.data.success) {\r\n        setSent(true);\r\n      } else {\r\n        setError(response.data.error || 'Failed to send report');\r\n      }\r\n    } catch (err) {\r\n      console.error('Send error:', err);\r\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to send report';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenDraft = async () => {\r\n    if (!outlookStatus?.success) {\r\n      setError(outlookStatus?.message || 'Outlook is not ready');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.post('/api/report/draft', getReportPayload());\r\n\r\n      if (response.data.success) {\r\n        onClose();\r\n      } else {\r\n        setError(response.data.error || 'Failed to open draft');\r\n      }\r\n    } catch (err) {\r\n      console.error('Draft error:', err);\r\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to open draft';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handlePreview = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n\r\n      // Use POST for preview to send chart tags\r\n      const response = await fetch('/api/report/preview', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          use_case: useCase,\r\n          period: period,\r\n          business_segment: businessSegment !== 'All' ? businessSegment : undefined,\r\n          device_type: deviceType !== 'All' ? deviceType : undefined,\r\n          page_type: pageType !== 'All' ? pageType : undefined,\r\n          chart_tags: chartTags,\r\n          chart_display: chartDisplay,\r\n          selected_kpi: selectedKPI\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        setError(data.error || 'Failed to generate preview');\r\n        return;\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      window.open(blobUrl, '_blank');\r\n    } catch (err) {\r\n      console.error('Preview error:', err);\r\n      setError('Failed to generate preview');\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) onClose();\r\n  };\r\n\r\n  const handleRetryOutlook = () => {\r\n    setError(null);\r\n    checkOutlookStatus();\r\n  };\r\n\r\n  if (sent) {\r\n    return (\r\n      <div className=\"modal-backdrop\" onClick={handleBackdropClick}>\r\n        <div className=\"send-modal success-state\">\r\n          <div className=\"success-icon\">\r\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n              <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n            </svg>\r\n          </div>\r\n          <h2>Report Sent</h2>\r\n          <p>The report has been sent to {selectedRecipients.length} recipient{selectedRecipients.length !== 1 ? 's' : ''} via Outlook.</p>\r\n          <div className=\"sent-recipients\">\r\n            {selectedRecipients.map(email => (\r\n              <span key={email} className=\"sent-email\">{email}</span>\r\n            ))}\r\n          </div>\r\n          <button className=\"btn-primary\" onClick={onClose}>Done</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const outlookReady = outlookStatus?.success === true;\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\" onClick={handleBackdropClick}>\r\n      <div className=\"send-modal\">\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <h2>Send Report</h2>\r\n            <p className=\"header-subtitle\">{useCase}</p>\r\n          </div>\r\n          <button className=\"close-btn\" onClick={onClose}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n          {checkingOutlook ? (\r\n            <div className=\"outlook-status-checking\">\r\n              <div className=\"loading-spinner-small\"></div>\r\n              <span>Checking Outlook status...</span>\r\n            </div>\r\n          ) : outlookReady ? (\r\n            <div className=\"outlook-user-info outlook-ready\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n                <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n              </svg>\r\n              <span>Sending from: <strong>{outlookStatus.email}</strong></span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"outlook-user-info outlook-error\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\r\n                <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\r\n              </svg>\r\n              <div className=\"outlook-error-content\">\r\n                <span>{outlookStatus?.message || 'Unable to connect to Outlook'}</span>\r\n                <button className=\"retry-btn\" onClick={handleRetryOutlook}>\r\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <polyline points=\"23 4 23 10 17 10\"></polyline>\r\n                    <path d=\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"></path>\r\n                  </svg>\r\n                  Retry\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"report-preview-section\">\r\n            <div className=\"preview-info\">\r\n              <span className=\"preview-label\">Report Period</span>\r\n              <span className=\"preview-value\">{periodLabel}</span>\r\n            </div>\r\n            <button className=\"preview-btn\" onClick={handlePreview}>\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n              </svg>\r\n              Preview PDF\r\n            </button>\r\n          </div>\r\n\r\n          {/* Chart Options Section */}\r\n          <div className=\"chart-options-section\">\r\n            <label className=\"section-label\">Chart Options</label>\r\n            <div className=\"chart-options-row\">\r\n              <div className=\"chart-option-group\">\r\n                <span className=\"option-label\">KPI:</span>\r\n                <span className=\"option-value\">{kpiLabels[selectedKPI] || selectedKPI}</span>\r\n              </div>\r\n              <div className=\"chart-option-group\">\r\n                <span className=\"option-label\">Display:</span>\r\n                <div className=\"chart-display-toggle\">\r\n                  <button\r\n                    className={`toggle-option ${chartDisplay === 'both' ? 'active' : ''}`}\r\n                    onClick={() => setChartDisplay('both')}\r\n                  >\r\n                    Both\r\n                  </button>\r\n                  <button\r\n                    className={`toggle-option ${chartDisplay === 'ty' ? 'active' : ''}`}\r\n                    onClick={() => setChartDisplay('ty')}\r\n                  >\r\n                    TY Only\r\n                  </button>\r\n                  <button\r\n                    className={`toggle-option ${chartDisplay === 'ly' ? 'active' : ''}`}\r\n                    onClick={() => setChartDisplay('ly')}\r\n                  >\r\n                    LY Only\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {chartTags && chartTags.length > 0 && (\r\n              <div className=\"chart-tags-info\">\r\n                <span className=\"tags-count\">{chartTags.length} event{chartTags.length !== 1 ? 's' : ''} will be included</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"recipients-section\">\r\n            <label className=\"section-label\">Recipients</label>\r\n\r\n            {loading ? (\r\n              <div className=\"loading-recipients\">\r\n                <div className=\"loading-spinner-small\"></div>\r\n                Loading stakeholders...\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {stakeholders.length > 0 && (\r\n                  <div className=\"stakeholders-list\">\r\n                    <span className=\"list-label\">Stakeholders from config:</span>\r\n                    {stakeholders.map(email => (\r\n                      <label key={email} className=\"recipient-checkbox\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecipients.includes(email)}\r\n                          onChange={() => toggleRecipient(email)}\r\n                        />\r\n                        <span className=\"checkbox-custom\"></span>\r\n                        <span className=\"recipient-email\">{email}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {stakeholders.length === 0 && (\r\n                  <div className=\"no-stakeholders\">\r\n                    No stakeholders configured. Add recipients below.\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"add-recipient\">\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Add email address\"\r\n                    value={customEmail}\r\n                    onChange={(e) => {\r\n                      setCustomEmail(e.target.value);\r\n                      setError(null);\r\n                    }}\r\n                    onKeyDown={handleKeyDown}\r\n                  />\r\n                  <button\r\n                    className=\"add-btn\"\r\n                    onClick={addCustomEmail}\r\n                    disabled={!customEmail.trim()}\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n\r\n                {selectedRecipients.length > 0 && (\r\n                  <div className=\"selected-recipients\">\r\n                    <span className=\"list-label\">Will send to ({selectedRecipients.length}):</span>\r\n                    <div className=\"recipient-tags\">\r\n                      {selectedRecipients.map(email => (\r\n                        <span key={email} className=\"recipient-tag\">\r\n                          {email}\r\n                          <button onClick={() => removeRecipient(email)}>\r\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                            </svg>\r\n                          </button>\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n              </svg>\r\n              <span>{error}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button className=\"btn-secondary\" onClick={onClose}>Cancel</button>\r\n          <button\r\n            className=\"btn-tertiary\"\r\n            onClick={handleOpenDraft}\r\n            disabled={sending || !outlookReady}\r\n            title={outlookReady ? \"Open in Outlook to review before sending\" : \"Outlook not ready\"}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n            </svg>\r\n            Open in Outlook\r\n          </button>\r\n          <button\r\n            className=\"btn-primary\"\r\n            onClick={handleSend}\r\n            disabled={sending || selectedRecipients.length === 0 || !outlookReady}\r\n          >\r\n            {sending ? (\r\n              <>\r\n                <span className=\"spinner\"></span>\r\n                Sending...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\r\n                  <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\r\n                </svg>\r\n                Send Report\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SendReportModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}