{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../utils/api';import'./SendReportModal.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function SendReportModal(_ref){let{useCase,period,periodLabel,onClose,businessSegment,deviceType,pageType}=_ref;const[stakeholders,setStakeholders]=useState([]);const[selectedRecipients,setSelectedRecipients]=useState([]);const[customEmail,setCustomEmail]=useState('');const[loading,setLoading]=useState(true);const[sending,setSending]=useState(false);const[sent,setSent]=useState(false);const[error,setError]=useState(null);const[outlookStatus,setOutlookStatus]=useState(null);const[checkingOutlook,setCheckingOutlook]=useState(true);useEffect(()=>{fetchStakeholders();checkOutlookStatus();},[useCase]);useEffect(()=>{const handleEscape=e=>{if(e.key==='Escape')onClose();};document.addEventListener('keydown',handleEscape);document.body.style.overflow='hidden';return()=>{document.removeEventListener('keydown',handleEscape);document.body.style.overflow='';};},[onClose]);const checkOutlookStatus=async()=>{setCheckingOutlook(true);try{const response=await api.get('/api/email/current-user');setOutlookStatus(response.data);}catch(err){console.error('Error checking Outlook status:',err);setOutlookStatus({success:false,message:'Unable to connect to email service'});}finally{setCheckingOutlook(false);}};const fetchStakeholders=async()=>{try{const response=await api.get('/api/stakeholders',{params:{use_case:useCase}});const emails=response.data.stakeholders||[];setStakeholders(emails);setSelectedRecipients(emails);}catch(err){console.error('Error fetching stakeholders:',err);}finally{setLoading(false);}};const toggleRecipient=email=>{setSelectedRecipients(prev=>prev.includes(email)?prev.filter(e=>e!==email):[...prev,email]);};const isValidEmail=email=>{return email&&email.includes('@')&&email.includes('.');};const addCustomEmail=()=>{const email=customEmail.trim().toLowerCase();if(isValidEmail(email)&&!selectedRecipients.includes(email)){setSelectedRecipients(prev=>[...prev,email]);setCustomEmail('');setError(null);}else if(!isValidEmail(email)){setError('Please enter a valid email address');}};const removeRecipient=email=>{setSelectedRecipients(prev=>prev.filter(e=>e!==email));};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();addCustomEmail();}};const handleSend=async()=>{if(selectedRecipients.length===0){setError('Please add at least one recipient');return;}if(!(outlookStatus!==null&&outlookStatus!==void 0&&outlookStatus.success)){setError((outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Outlook is not ready');return;}setSending(true);setError(null);try{const response=await api.post('/api/report/send',{use_case:useCase,period:period,recipients:selectedRecipients,business_segment:businessSegment,device_type:deviceType,page_type:pageType});if(response.data.success){setSent(true);}else{setError(response.data.error||'Failed to send report');}}catch(err){var _err$response,_err$response$data;console.error('Send error:',err);const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Failed to send report';setError(errorMessage);}finally{setSending(false);}};const handleOpenDraft=async()=>{if(!(outlookStatus!==null&&outlookStatus!==void 0&&outlookStatus.success)){setError((outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Outlook is not ready');return;}setSending(true);setError(null);try{const response=await api.post('/api/report/draft',{use_case:useCase,period:period,recipients:selectedRecipients,business_segment:businessSegment,device_type:deviceType,page_type:pageType});if(response.data.success){onClose();}else{setError(response.data.error||'Failed to open draft');}}catch(err){var _err$response2,_err$response2$data;console.error('Draft error:',err);const errorMessage=((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message||'Failed to open draft';setError(errorMessage);}finally{setSending(false);}};const handlePreview=async()=>{try{const token=localStorage.getItem('token');let url=\"/api/report/preview?use_case=\".concat(encodeURIComponent(useCase),\"&period=\").concat(period);if(businessSegment&&businessSegment!=='All')url+=\"&business_segment=\".concat(encodeURIComponent(businessSegment));if(deviceType&&deviceType!=='All')url+=\"&device_type=\".concat(encodeURIComponent(deviceType));if(pageType&&pageType!=='All')url+=\"&page_type=\".concat(encodeURIComponent(pageType));const response=await fetch(url,{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){const data=await response.json();setError(data.error||'Failed to generate preview');return;}const blob=await response.blob();const blobUrl=URL.createObjectURL(blob);window.open(blobUrl,'_blank');}catch(err){console.error('Preview error:',err);setError('Failed to generate preview');}};const handleBackdropClick=e=>{if(e.target===e.currentTarget)onClose();};const handleRetryOutlook=()=>{setError(null);checkOutlookStatus();};if(sent){return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:handleBackdropClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"send-modal success-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22 4 12 14.01 9 11.01\"})]})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Report Sent\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"The report has been sent to \",selectedRecipients.length,\" recipient\",selectedRecipients.length!==1?'s':'',\" via Outlook.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"sent-recipients\",children:selectedRecipients.map(email=>/*#__PURE__*/_jsx(\"span\",{className:\"sent-email\",children:email},email))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:onClose,children:\"Done\"})]})});}const outlookReady=(outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.success)===true;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:handleBackdropClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"send-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Send Report\"}),/*#__PURE__*/_jsx(\"p\",{className:\"header-subtitle\",children:useCase})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[checkingOutlook?/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-status-checking\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Checking Outlook status...\"})]}):outlookReady?/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-user-info outlook-ready\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"22 4 12 14.01 9 11.01\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Sending from: \",/*#__PURE__*/_jsx(\"strong\",{children:outlookStatus.email})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-user-info outlook-error\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"8\",x2:\"12\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"16\",x2:\"12.01\",y2:\"16\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"outlook-error-content\",children:[/*#__PURE__*/_jsx(\"span\",{children:(outlookStatus===null||outlookStatus===void 0?void 0:outlookStatus.message)||'Unable to connect to Outlook'}),/*#__PURE__*/_jsxs(\"button\",{className:\"retry-btn\",onClick:handleRetryOutlook,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"23 4 23 10 17 10\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"})]}),\"Retry\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-preview-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"preview-label\",children:\"Report Period\"}),/*#__PURE__*/_jsx(\"span\",{className:\"preview-value\",children:periodLabel})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"preview-btn\",onClick:handlePreview,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"3\"})]}),\"Preview PDF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipients-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"section-label\",children:\"Recipients\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-recipients\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),\"Loading stakeholders...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[stakeholders.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholders-list\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"list-label\",children:\"Stakeholders from config:\"}),stakeholders.map(email=>/*#__PURE__*/_jsxs(\"label\",{className:\"recipient-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedRecipients.includes(email),onChange:()=>toggleRecipient(email)}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-custom\"}),/*#__PURE__*/_jsx(\"span\",{className:\"recipient-email\",children:email})]},email))]}),stakeholders.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-stakeholders\",children:\"No stakeholders configured. Add recipients below.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-recipient\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Add email address\",value:customEmail,onChange:e=>{setCustomEmail(e.target.value);setError(null);},onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:addCustomEmail,disabled:!customEmail.trim(),children:\"Add\"})]}),selectedRecipients.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-recipients\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"list-label\",children:[\"Will send to (\",selectedRecipients.length,\"):\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"recipient-tags\",children:selectedRecipients.map(email=>/*#__PURE__*/_jsxs(\"span\",{className:\"recipient-tag\",children:[email,/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeRecipient(email),children:/*#__PURE__*/_jsxs(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})})]},email))})]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"9\",y2:\"15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"15\"})]}),/*#__PURE__*/_jsx(\"span\",{children:error})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-tertiary\",onClick:handleOpenDraft,disabled:sending||!outlookReady,title:outlookReady?\"Open in Outlook to review before sending\":\"Outlook not ready\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]}),\"Open in Outlook\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleSend,disabled:sending||selectedRecipients.length===0||!outlookReady,children:sending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\"Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"22\",y1:\"2\",x2:\"11\",y2:\"13\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"22 2 15 22 11 13 2 9 22 2\"})]}),\"Send Report\"]})})]})]})});}export default SendReportModal;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SendReportModal","_ref","useCase","period","periodLabel","onClose","businessSegment","deviceType","pageType","stakeholders","setStakeholders","selectedRecipients","setSelectedRecipients","customEmail","setCustomEmail","loading","setLoading","sending","setSending","sent","setSent","error","setError","outlookStatus","setOutlookStatus","checkingOutlook","setCheckingOutlook","fetchStakeholders","checkOutlookStatus","handleEscape","e","key","document","addEventListener","body","style","overflow","removeEventListener","response","get","data","err","console","success","message","params","use_case","emails","toggleRecipient","email","prev","includes","filter","isValidEmail","addCustomEmail","trim","toLowerCase","removeRecipient","handleKeyDown","preventDefault","handleSend","length","post","recipients","business_segment","device_type","page_type","_err$response","_err$response$data","errorMessage","handleOpenDraft","_err$response2","_err$response2$data","handlePreview","token","localStorage","getItem","url","concat","encodeURIComponent","fetch","headers","ok","json","blob","blobUrl","URL","createObjectURL","window","open","handleBackdropClick","target","currentTarget","handleRetryOutlook","className","onClick","children","width","height","viewBox","fill","stroke","strokeWidth","d","points","map","outlookReady","x1","y1","x2","y2","cx","cy","r","type","checked","onChange","placeholder","value","onKeyDown","disabled","title"],"sources":["C:/Users/AkashPatil/THD-Dashboard/frontend/src/components/SendReportModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../utils/api';\r\nimport './SendReportModal.css';\r\n\r\nfunction SendReportModal({ useCase, period, periodLabel, onClose, businessSegment, deviceType, pageType }) {\r\n  const [stakeholders, setStakeholders] = useState([]);\r\n  const [selectedRecipients, setSelectedRecipients] = useState([]);\r\n  const [customEmail, setCustomEmail] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [sending, setSending] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [outlookStatus, setOutlookStatus] = useState(null);\r\n  const [checkingOutlook, setCheckingOutlook] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchStakeholders();\r\n    checkOutlookStatus();\r\n  }, [useCase]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    document.addEventListener('keydown', handleEscape);\r\n    document.body.style.overflow = 'hidden';\r\n    \r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [onClose]);\r\n\r\n  const checkOutlookStatus = async () => {\r\n    setCheckingOutlook(true);\r\n    try {\r\n      const response = await api.get('/api/email/current-user');\r\n      setOutlookStatus(response.data);\r\n    } catch (err) {\r\n      console.error('Error checking Outlook status:', err);\r\n      setOutlookStatus({\r\n        success: false,\r\n        message: 'Unable to connect to email service'\r\n      });\r\n    } finally {\r\n      setCheckingOutlook(false);\r\n    }\r\n  };\r\n\r\n  const fetchStakeholders = async () => {\r\n    try {\r\n      const response = await api.get('/api/stakeholders', {\r\n        params: { use_case: useCase }\r\n      });\r\n      const emails = response.data.stakeholders || [];\r\n      setStakeholders(emails);\r\n      setSelectedRecipients(emails);\r\n    } catch (err) {\r\n      console.error('Error fetching stakeholders:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleRecipient = (email) => {\r\n    setSelectedRecipients(prev => \r\n      prev.includes(email)\r\n        ? prev.filter(e => e !== email)\r\n        : [...prev, email]\r\n    );\r\n  };\r\n\r\n  const isValidEmail = (email) => {\r\n    return email && email.includes('@') && email.includes('.');\r\n  };\r\n\r\n  const addCustomEmail = () => {\r\n    const email = customEmail.trim().toLowerCase();\r\n    if (isValidEmail(email) && !selectedRecipients.includes(email)) {\r\n      setSelectedRecipients(prev => [...prev, email]);\r\n      setCustomEmail('');\r\n      setError(null);\r\n    } else if (!isValidEmail(email)) {\r\n      setError('Please enter a valid email address');\r\n    }\r\n  };\r\n\r\n  const removeRecipient = (email) => {\r\n    setSelectedRecipients(prev => prev.filter(e => e !== email));\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      addCustomEmail();\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (selectedRecipients.length === 0) {\r\n      setError('Please add at least one recipient');\r\n      return;\r\n    }\r\n\r\n    if (!outlookStatus?.success) {\r\n      setError(outlookStatus?.message || 'Outlook is not ready');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.post('/api/report/send', {\r\n        use_case: useCase,\r\n        period: period,\r\n        recipients: selectedRecipients,\r\n        business_segment: businessSegment,\r\n        device_type: deviceType,\r\n        page_type: pageType\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        setSent(true);\r\n      } else {\r\n        setError(response.data.error || 'Failed to send report');\r\n      }\r\n    } catch (err) {\r\n      console.error('Send error:', err);\r\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to send report';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenDraft = async () => {\r\n    if (!outlookStatus?.success) {\r\n      setError(outlookStatus?.message || 'Outlook is not ready');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.post('/api/report/draft', {\r\n        use_case: useCase,\r\n        period: period,\r\n        recipients: selectedRecipients,\r\n        business_segment: businessSegment,\r\n        device_type: deviceType,\r\n        page_type: pageType\r\n      });\r\n      \r\n      if (response.data.success) {\r\n        onClose();\r\n      } else {\r\n        setError(response.data.error || 'Failed to open draft');\r\n      }\r\n    } catch (err) {\r\n      console.error('Draft error:', err);\r\n      const errorMessage = err.response?.data?.error || err.message || 'Failed to open draft';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handlePreview = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      let url = `/api/report/preview?use_case=${encodeURIComponent(useCase)}&period=${period}`;\r\n      if (businessSegment && businessSegment !== 'All') url += `&business_segment=${encodeURIComponent(businessSegment)}`;\r\n      if (deviceType && deviceType !== 'All') url += `&device_type=${encodeURIComponent(deviceType)}`;\r\n      if (pageType && pageType !== 'All') url += `&page_type=${encodeURIComponent(pageType)}`;\r\n      \r\n      const response = await fetch(url, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        setError(data.error || 'Failed to generate preview');\r\n        return;\r\n      }\r\n      \r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      window.open(blobUrl, '_blank');\r\n    } catch (err) {\r\n      console.error('Preview error:', err);\r\n      setError('Failed to generate preview');\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) onClose();\r\n  };\r\n\r\n  const handleRetryOutlook = () => {\r\n    setError(null);\r\n    checkOutlookStatus();\r\n  };\r\n\r\n  if (sent) {\r\n    return (\r\n      <div className=\"modal-backdrop\" onClick={handleBackdropClick}>\r\n        <div className=\"send-modal success-state\">\r\n          <div className=\"success-icon\">\r\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n              <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n            </svg>\r\n          </div>\r\n          <h2>Report Sent</h2>\r\n          <p>The report has been sent to {selectedRecipients.length} recipient{selectedRecipients.length !== 1 ? 's' : ''} via Outlook.</p>\r\n          <div className=\"sent-recipients\">\r\n            {selectedRecipients.map(email => (\r\n              <span key={email} className=\"sent-email\">{email}</span>\r\n            ))}\r\n          </div>\r\n          <button className=\"btn-primary\" onClick={onClose}>Done</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const outlookReady = outlookStatus?.success === true;\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\" onClick={handleBackdropClick}>\r\n      <div className=\"send-modal\">\r\n        <div className=\"modal-header\">\r\n          <div className=\"header-content\">\r\n            <h2>Send Report</h2>\r\n            <p className=\"header-subtitle\">{useCase}</p>\r\n          </div>\r\n          <button className=\"close-btn\" onClick={onClose}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n          {checkingOutlook ? (\r\n            <div className=\"outlook-status-checking\">\r\n              <div className=\"loading-spinner-small\"></div>\r\n              <span>Checking Outlook status...</span>\r\n            </div>\r\n          ) : outlookReady ? (\r\n            <div className=\"outlook-user-info outlook-ready\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n                <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n              </svg>\r\n              <span>Sending from: <strong>{outlookStatus.email}</strong></span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"outlook-user-info outlook-error\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\r\n                <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\r\n              </svg>\r\n              <div className=\"outlook-error-content\">\r\n                <span>{outlookStatus?.message || 'Unable to connect to Outlook'}</span>\r\n                <button className=\"retry-btn\" onClick={handleRetryOutlook}>\r\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <polyline points=\"23 4 23 10 17 10\"></polyline>\r\n                    <path d=\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\"></path>\r\n                  </svg>\r\n                  Retry\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"report-preview-section\">\r\n            <div className=\"preview-info\">\r\n              <span className=\"preview-label\">Report Period</span>\r\n              <span className=\"preview-value\">{periodLabel}</span>\r\n            </div>\r\n            <button className=\"preview-btn\" onClick={handlePreview}>\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n              </svg>\r\n              Preview PDF\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"recipients-section\">\r\n            <label className=\"section-label\">Recipients</label>\r\n            \r\n            {loading ? (\r\n              <div className=\"loading-recipients\">\r\n                <div className=\"loading-spinner-small\"></div>\r\n                Loading stakeholders...\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {stakeholders.length > 0 && (\r\n                  <div className=\"stakeholders-list\">\r\n                    <span className=\"list-label\">Stakeholders from config:</span>\r\n                    {stakeholders.map(email => (\r\n                      <label key={email} className=\"recipient-checkbox\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedRecipients.includes(email)}\r\n                          onChange={() => toggleRecipient(email)}\r\n                        />\r\n                        <span className=\"checkbox-custom\"></span>\r\n                        <span className=\"recipient-email\">{email}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {stakeholders.length === 0 && (\r\n                  <div className=\"no-stakeholders\">\r\n                    No stakeholders configured. Add recipients below.\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"add-recipient\">\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Add email address\"\r\n                    value={customEmail}\r\n                    onChange={(e) => {\r\n                      setCustomEmail(e.target.value);\r\n                      setError(null);\r\n                    }}\r\n                    onKeyDown={handleKeyDown}\r\n                  />\r\n                  <button \r\n                    className=\"add-btn\" \r\n                    onClick={addCustomEmail}\r\n                    disabled={!customEmail.trim()}\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n\r\n                {selectedRecipients.length > 0 && (\r\n                  <div className=\"selected-recipients\">\r\n                    <span className=\"list-label\">Will send to ({selectedRecipients.length}):</span>\r\n                    <div className=\"recipient-tags\">\r\n                      {selectedRecipients.map(email => (\r\n                        <span key={email} className=\"recipient-tag\">\r\n                          {email}\r\n                          <button onClick={() => removeRecipient(email)}>\r\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                            </svg>\r\n                          </button>\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n              </svg>\r\n              <span>{error}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button className=\"btn-secondary\" onClick={onClose}>Cancel</button>\r\n          <button \r\n            className=\"btn-tertiary\" \r\n            onClick={handleOpenDraft}\r\n            disabled={sending || !outlookReady}\r\n            title={outlookReady ? \"Open in Outlook to review before sending\" : \"Outlook not ready\"}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n            </svg>\r\n            Open in Outlook\r\n          </button>\r\n          <button \r\n            className=\"btn-primary\" \r\n            onClick={handleSend}\r\n            disabled={sending || selectedRecipients.length === 0 || !outlookReady}\r\n          >\r\n            {sending ? (\r\n              <>\r\n                <span className=\"spinner\"></span>\r\n                Sending...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\r\n                  <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\r\n                </svg>\r\n                Send Report\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SendReportModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}